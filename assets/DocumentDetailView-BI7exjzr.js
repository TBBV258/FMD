import{a as S,r as _,P as j,c as i,l as T,p as z,w as d,o,h as t,j as n,i as y,u as I,b as r,n as h,t as l,k as u,e as c}from"./vue-vendor-BHw4onN5.js";import{u as P}from"./documents-B_omdVHG.js";import{a as R,b as p,T as M}from"./index-BUR5dxbQ.js";import{_ as q}from"./MainLayout.vue_vue_type_script_setup_true_lang-C8o4x7wP.js";import{_ as O}from"./LoadingSkeleton.vue_vue_type_script_setup_true_lang-DRxisrEQ.js";import"./supabase-aQ0K3vAX.js";import"./logofmd-DeXnOIzE.js";const A={class:"min-h-screen bg-gray-50 dark:bg-dark-bg"},F={class:"fixed top-0 left-0 right-0 z-40 bg-white/90 dark:bg-dark-card/90 backdrop-blur-sm border-b border-gray-200 dark:border-dark-border pt-safe"},G={class:"flex items-center justify-between px-4 h-14"},H={class:"pt-14 pb-safe"},J={key:0,class:"p-4"},K={key:1,class:"max-w-2xl mx-auto"},Q={class:"relative aspect-square bg-gray-200 dark:bg-dark-card"},U=["src","alt"],W={key:1,class:"w-full h-full flex items-center justify-center"},X={class:"p-4 space-y-6"},Y={class:"flex items-center space-x-2"},Z={class:"badge badge-primary"},tt={class:"text-2xl font-bold text-gray-900 dark:text-dark-text mb-2"},et={key:0,class:"text-gray-600 dark:text-gray-400"},st={class:"card space-y-3"},at={key:0,class:"flex items-start"},ot={class:"flex-1"},rt={class:"font-medium"},lt={key:1,class:"flex items-start"},it={class:"flex-1"},nt={class:"font-medium"},dt={class:"flex items-start"},ut={class:"flex-1"},ct={class:"font-medium"},mt={key:2,class:"flex items-start"},ft={class:"flex-1"},vt={class:"font-medium"},pt={class:"space-y-2"},gt={key:2,class:"flex flex-col items-center justify-center min-h-[60vh] px-4"},Ct=S({__name:"DocumentDetailView",setup(bt){const m=I(),k=j(),g=P(),{success:b,error:w}=R(),f=_(!0),s=_(null),v=k.params.id,D=i(()=>s.value?{lost:"badge badge-danger",found:"badge badge-success",matched:"badge bg-purple-500/10 text-purple-500",returned:"badge badge-success"}[s.value.status]||"badge badge-primary":""),C=i(()=>s.value?{lost:"Perdido",found:"Encontrado",matched:"Match",returned:"Devolvido",normal:"Normal"}[s.value.status]||s.value.status:""),$=i(()=>s.value?{passport:"fas fa-passport",id_card:"fas fa-id-card",driver_license:"fas fa-id-card-alt",birth_certificate:"fas fa-file-alt",other:"fas fa-file"}[s.value.type]||"fas fa-file":""),B=i(()=>s.value?{passport:"Passaporte",id_card:"Bilhete de Identidade",driver_license:"Carta de Condução",birth_certificate:"Certidão de Nascimento",other:"Outro Documento"}[s.value.type]||"Documento":""),E=i(()=>s.value?new Date(s.value.created_at).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}):""),L=a=>new Date(a).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"}),N=()=>{s.value&&m.push(`/chat/${v}`)},x=async()=>{if(!s.value)return;const a={title:s.value.title,text:`${s.value.title} - ${s.value.description||"Ver documento"}`,url:`${window.location.origin}/document/${v}`};try{navigator.share?(await navigator.share(a),b("Documento compartilhado!")):(await navigator.clipboard.writeText(a.url),b("Link copiado para área de transferência!"))}catch(e){console.error("Error sharing:",e)}};return T(async()=>{f.value=!0;const a=await g.fetchDocumentById(v);a.success?s.value=g.currentDocument:w(a.error||"Erro ao carregar documento"),f.value=!1}),(a,e)=>(o(),z(q,{"show-top-bar":!1},{default:d(()=>[t("div",A,[t("header",F,[t("div",G,[t("button",{class:"btn-icon",onClick:e[0]||(e[0]=V=>y(m).back())},[...e[2]||(e[2]=[t("i",{class:"fas fa-arrow-left"},null,-1)])]),e[4]||(e[4]=t("h1",{class:"text-lg font-semibold"},"Detalhes",-1)),t("button",{class:"btn-icon",onClick:x},[...e[3]||(e[3]=[t("i",{class:"fas fa-share-alt"},null,-1)])])])]),t("div",H,[f.value?(o(),r("div",J,[n(O,{type:"card"})])):s.value?(o(),r("div",K,[t("div",Q,[s.value.file_url||s.value.thumbnail_url?(o(),r("img",{key:0,src:s.value.file_url||s.value.thumbnail_url,alt:s.value.title,class:"w-full h-full object-cover"},null,8,U)):(o(),r("div",W,[...e[5]||(e[5]=[t("i",{class:"fas fa-file text-gray-400 text-8xl"},null,-1)])]))]),t("div",X,[t("div",Y,[t("span",{class:h(D.value)},l(C.value),3),t("span",Z,[t("i",{class:h([$.value,"mr-1"])},null,2),u(" "+l(B.value),1)])]),t("div",null,[t("h2",tt,l(s.value.title),1),s.value.description?(o(),r("p",et,l(s.value.description),1)):c("",!0)]),t("div",st,[s.value.document_number?(o(),r("div",at,[e[7]||(e[7]=t("i",{class:"fas fa-hashtag text-gray-400 w-6 mt-1"},null,-1)),t("div",ot,[e[6]||(e[6]=t("p",{class:"text-sm text-gray-500"},"Número do Documento",-1)),t("p",rt,l(s.value.document_number),1)])])):c("",!0),s.value.location?(o(),r("div",lt,[e[9]||(e[9]=t("i",{class:"fas fa-map-marker-alt text-gray-400 w-6 mt-1"},null,-1)),t("div",it,[e[8]||(e[8]=t("p",{class:"text-sm text-gray-500"},"Local",-1)),t("p",nt,l(s.value.location),1)])])):c("",!0),t("div",dt,[e[11]||(e[11]=t("i",{class:"fas fa-clock text-gray-400 w-6 mt-1"},null,-1)),t("div",ut,[e[10]||(e[10]=t("p",{class:"text-sm text-gray-500"},"Data de Publicação",-1)),t("p",ct,l(E.value),1)])]),s.value.issue_date?(o(),r("div",mt,[e[13]||(e[13]=t("i",{class:"fas fa-calendar text-gray-400 w-6 mt-1"},null,-1)),t("div",ft,[e[12]||(e[12]=t("p",{class:"text-sm text-gray-500"},"Data de Emissão",-1)),t("p",vt,l(L(s.value.issue_date)),1)])])):c("",!0)]),t("div",pt,[n(p,{variant:"primary",size:"lg","full-width":"",onClick:N},{default:d(()=>[...e[14]||(e[14]=[t("i",{class:"fas fa-comment-dots mr-2"},null,-1),u(" Entrar em Contacto ",-1)])]),_:1}),n(p,{variant:"outline",size:"lg","full-width":"",onClick:x},{default:d(()=>[...e[15]||(e[15]=[t("i",{class:"fas fa-share-alt mr-2"},null,-1),u(" Compartilhar ",-1)])]),_:1})])])])):(o(),r("div",gt,[e[17]||(e[17]=t("i",{class:"fas fa-exclamation-triangle text-gray-400 text-6xl mb-4"},null,-1)),e[18]||(e[18]=t("h3",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2"}," Documento não encontrado ",-1)),n(p,{variant:"primary",onClick:e[1]||(e[1]=V=>y(m).back())},{default:d(()=>[...e[16]||(e[16]=[u(" Voltar ",-1)])]),_:1})]))]),n(M)])]),_:1}))}});export{Ct as default};
