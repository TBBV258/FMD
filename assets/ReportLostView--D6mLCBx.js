import{a as A,r as u,c as O,M as _,p as j,w as V,o as r,h as o,j as i,i as q,u as J,O as M,b as c,s as G,n as S,t as d,F as H,R as K,S as Q,e as p,k as m}from"./vue-vendor-DJ0JNZJp.js";import{u as W,b as X,T as Y,a as Z}from"./index-OUv6I-l5.js";import{u as ee}from"./documents-DAXEsCRq.js";import{_ as oe}from"./MainLayout.vue_vue_type_script_setup_true_lang-D3S3XnV8.js";import{_ as y}from"./BaseInput.vue_vue_type_script_setup_true_lang-CoC9VMDy.js";import{_ as te}from"./PhotoPickerModal.vue_vue_type_script_setup_true_lang-pVdlN33h.js";import{L as D}from"./LocationPicker-qhIpodQX.js";import"./supabase-aQ0K3vAX.js";import"./logofmd-DeXnOIzE.js";import"./BaseModal-CnTmPs9q.js";import"./maplibre-XFgcxNEv.js";import"./useGeolocation-D46f4tYI.js";const ae={class:"px-4 py-6"},le={class:"max-w-2xl mx-auto"},se={class:"mb-6"},ne={class:"form-group"},re={class:"grid grid-cols-2 gap-3"},ie=["onClick"],de={class:"text-sm"},ue={class:"form-group"},ce={class:"space-y-2"},me={class:"flex items-center space-x-2"},pe={key:0,class:"bg-success/10 rounded-lg p-3 text-sm"},fe={class:"text-xs text-gray-600 dark:text-gray-400"},be={class:"space-y-2"},ve={class:"flex items-center space-x-2"},xe={key:0,class:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3 text-sm"},ge={class:"text-xs text-blue-700 dark:text-blue-300"},ke={class:"form-group"},ye={key:0},Pe={key:1,class:"flex items-center justify-center space-x-2"},ze=A({__name:"ReportLostView",setup(Ce){const f=J(),P=W(),w=ee(),{success:E,error:b}=Z(),v=u(!1),C=u(null),x=u(!1),g=u(!1),k=u(!1),s=u(null),n=u(null),L=O(()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)),a=_({title:"",type:"bi",status:"lost",description:"",location:"",documentNumber:"",file:void 0}),I=[{label:"Bilhete de Identidade (BI)",value:"bi",icon:"fas fa-id-card"},{label:"Passaporte",value:"passport",icon:"fas fa-passport"},{label:"Carta de Condução",value:"driver_license",icon:"fas fa-id-card-alt"},{label:"DIRE",value:"dire",icon:"fas fa-id-card"},{label:"NUIT",value:"nuit",icon:"fas fa-file-invoice"},{label:"Cartão de Trabalho",value:"work_card",icon:"fas fa-briefcase"},{label:"Cartão de Estudante",value:"student_card",icon:"fas fa-graduation-cap"},{label:"Cartão de Eleitor",value:"voter_card",icon:"fas fa-vote-yea"},{label:"Certidão de Nascimento",value:"birth_certificate",icon:"fas fa-file-alt"},{label:"Título de Propriedade",value:"title_deed",icon:"fas fa-home"},{label:"Outro",value:"other",icon:"fas fa-file"}],T=l=>{const e="card flex flex-col items-center justify-center p-4 cursor-pointer transition-all";return l===a.type?`${e} border-2 border-primary bg-primary/5`:`${e} hover:border-primary`},$=()=>{L.value?x.value=!0:C.value?.click()},B=l=>{const t=l.target.files?.[0];t&&(a.file=t)},N=l=>{a.file=l},h=l=>{s.value=l},z=l=>{n.value=l},F=()=>{s.value=null},R=()=>{n.value=null},U=async()=>{if(!P.userId){b("Você precisa estar logado para relatar um documento"),f.push("/login");return}if(!a.title.trim()){b("Por favor, preencha o título do documento");return}v.value=!0;const l=await w.createDocument(P.userId,a);v.value=!1,l.success?(E("Documento publicado com sucesso!"),f.push("/")):b(l.error||"Erro ao publicar documento")};return(l,e)=>(r(),j(oe,{"show-bottom-nav":!1},{default:V(()=>[o("div",ae,[o("div",le,[o("div",se,[o("button",{class:"btn-icon mb-4",onClick:e[0]||(e[0]=t=>q(f).back())},[...e[11]||(e[11]=[o("i",{class:"fas fa-arrow-left"},null,-1)])]),e[12]||(e[12]=o("h1",{class:"text-2xl font-bold text-gray-900 dark:text-dark-text mb-2"}," Relatar Documento Perdido ",-1)),e[13]||(e[13]=o("p",{class:"text-gray-600 dark:text-gray-400"}," Preencha as informações para ajudarmos a encontrar seu documento ",-1))]),o("form",{onSubmit:M(U,["prevent"]),class:"space-y-6"},[o("div",ne,[e[14]||(e[14]=o("label",{class:"form-label"},"Tipo de Documento *",-1)),o("div",re,[(r(),c(H,null,G(I,t=>o("button",{key:t.value,type:"button",class:S(T(t.value)),onClick:Ve=>a.type=t.value},[o("i",{class:S([t.icon,"text-2xl mb-2"])},null,2),o("span",de,d(t.label),1)],10,ie)),64))])]),i(y,{modelValue:a.title,"onUpdate:modelValue":e[1]||(e[1]=t=>a.title=t),label:"Título do Documento",placeholder:"Ex: BI João Silva",required:""},null,8,["modelValue"]),o("div",ue,[e[15]||(e[15]=o("label",{class:"form-label"},"Descrição",-1)),K(o("textarea",{"onUpdate:modelValue":e[2]||(e[2]=t=>a.description=t),class:"input min-h-[100px] resize-none",placeholder:"Descreva detalhes do documento..."},null,512),[[Q,a.description]])]),i(y,{modelValue:a.documentNumber,"onUpdate:modelValue":e[3]||(e[3]=t=>a.documentNumber=t),label:"Número do Documento (opcional)",placeholder:"Ex: 110100123456A"},null,8,["modelValue"]),i(y,{modelValue:a.location,"onUpdate:modelValue":e[4]||(e[4]=t=>a.location=t),label:"Onde perdeu?",placeholder:"Ex: Praça da Independência, Maputo",icon:"fas fa-map-marker-alt"},null,8,["modelValue"]),o("div",ce,[e[19]||(e[19]=o("label",{class:"form-label"},"Localização no Mapa (opcional, mas recomendado)",-1)),o("div",me,[o("button",{type:"button",onClick:e[5]||(e[5]=t=>g.value=!0),class:"flex-1 btn btn-secondary"},[e[16]||(e[16]=o("i",{class:"fas fa-map-marked-alt mr-2"},null,-1)),m(" "+d(s.value?"Atualizar Localização":"Marcar no Mapa"),1)]),s.value?(r(),c("button",{key:0,type:"button",onClick:F,class:"btn-icon bg-red-100 text-danger hover:bg-red-200",title:"Remover localização"},[...e[17]||(e[17]=[o("i",{class:"fas fa-times"},null,-1)])])):p("",!0)]),s.value?(r(),c("div",pe,[e[18]||(e[18]=o("p",{class:"text-success-dark dark:text-success font-semibold mb-1"},[o("i",{class:"fas fa-check-circle mr-1"}),m(" Localização Marcada ")],-1)),o("p",fe," Lat: "+d(s.value.lat?.toFixed(6))+", Lng: "+d(s.value.lng?.toFixed(6)),1)])):p("",!0)]),o("div",be,[e[23]||(e[23]=o("label",{class:"form-label"},"Ponto de Encontro (opcional)",-1)),e[24]||(e[24]=o("p",{class:"text-xs text-gray-500 dark:text-gray-400 mb-2"}," Se alguém encontrar seu documento, onde vocês podem se encontrar para devolver? ",-1)),o("div",ve,[o("button",{type:"button",onClick:e[6]||(e[6]=t=>k.value=!0),class:"flex-1 btn btn-outline"},[e[20]||(e[20]=o("i",{class:"fas fa-handshake mr-2"},null,-1)),m(" "+d(n.value?"Atualizar Ponto de Encontro":"Marcar Ponto de Encontro"),1)]),n.value?(r(),c("button",{key:0,type:"button",onClick:R,class:"btn-icon bg-red-100 text-danger hover:bg-red-200",title:"Remover ponto de encontro"},[...e[21]||(e[21]=[o("i",{class:"fas fa-times"},null,-1)])])):p("",!0)]),n.value?(r(),c("div",xe,[e[22]||(e[22]=o("p",{class:"text-blue-900 dark:text-blue-100 font-semibold mb-1"},[o("i",{class:"fas fa-map-pin mr-1"}),m(" Ponto de Encontro Definido ")],-1)),o("p",ge," Lat: "+d(n.value.lat.toFixed(6))+", Lng: "+d(n.value.lng.toFixed(6)),1)])):p("",!0)]),o("div",ke,[e[28]||(e[28]=o("label",{class:"form-label"},"Foto do Documento (opcional)",-1)),o("div",{class:"border-2 border-dashed border-gray-300 dark:border-dark-border rounded-lg p-6 text-center cursor-pointer hover:border-primary transition-colors",onClick:$},[a.file?(r(),c("div",Pe,[e[27]||(e[27]=o("i",{class:"fas fa-file text-primary"},null,-1)),o("span",null,d(a.file.name),1),o("button",{type:"button",onClick:e[7]||(e[7]=M(t=>a.file=void 0,["stop"])),class:"text-danger"},[...e[26]||(e[26]=[o("i",{class:"fas fa-times"},null,-1)])])])):(r(),c("div",ye,[...e[25]||(e[25]=[o("i",{class:"fas fa-cloud-upload-alt text-4xl text-gray-400 mb-2"},null,-1),o("p",{class:"text-gray-600 dark:text-gray-400"}," Clique para adicionar foto ",-1)])]))]),o("input",{ref_key:"fileInputRef",ref:C,type:"file",accept:"image/*",class:"hidden",onChange:B},null,544)]),i(te,{modelValue:x.value,"onUpdate:modelValue":e[8]||(e[8]=t=>x.value=t),onFileSelected:N},null,8,["modelValue"]),i(D,{modelValue:g.value,"onUpdate:modelValue":e[9]||(e[9]=t=>g.value=t),title:"Onde você perdeu o documento?",message:"Marque no mapa o local aproximado onde perdeu o documento. Isso ajuda outras pessoas a encontrá-lo.","initial-location":s.value,onLocationSelected:h},null,8,["modelValue","initial-location"]),i(D,{modelValue:k.value,"onUpdate:modelValue":e[10]||(e[10]=t=>k.value=t),title:"Ponto de Encontro para Devolução",message:"Escolha um local público e seguro onde você pode se encontrar com quem encontrar seu documento.","initial-location":n.value,onLocationSelected:z},null,8,["modelValue","initial-location"]),i(X,{type:"submit",variant:"primary",size:"lg","full-width":"",loading:v.value,"loading-text":"Publicando..."},{default:V(()=>[...e[29]||(e[29]=[o("i",{class:"fas fa-paper-plane mr-2"},null,-1),m(" Publicar Documento Perdido ",-1)])]),_:1},8,["loading"])],32)])]),i(Y)]),_:1}))}});export{ze as default};
