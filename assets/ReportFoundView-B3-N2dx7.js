import{a as S,r as c,M as I,c as T,p as B,w as b,o as n,h as o,j as r,i as $,u as M,O as v,b as f,s as R,n as x,t as g,F,R as N,S as U,k as A}from"./vue-vendor-BHw4onN5.js";import{u as O,b as j,T as q,a as z}from"./index-QvtYAp7w.js";import{u as J}from"./documents-BOD2COYW.js";import{_ as L}from"./MainLayout.vue_vue_type_script_setup_true_lang-DPM7reLF.js";import{_ as y}from"./BaseInput.vue_vue_type_script_setup_true_lang-DG4AQMeE.js";import{_ as G}from"./PhotoPickerModal.vue_vue_type_script_setup_true_lang-uBcoATUh.js";import"./supabase-aQ0K3vAX.js";import"./logofmd-DeXnOIzE.js";import"./BaseModal-gFvbCxag.js";const H={class:"px-4 py-6"},K={class:"max-w-2xl mx-auto"},Q={class:"mb-6"},W={class:"form-group"},X={class:"grid grid-cols-2 gap-3"},Y=["onClick"],Z={class:"text-sm"},ee={class:"form-group"},oe={class:"form-group"},te={key:0},ae={key:1,class:"flex items-center justify-center space-x-2"},be=S({__name:"ReportFoundView",setup(se){const i=M(),m=O(),k=J(),{success:C,error:l}=z(),d=c(!1),p=c(null),a=I({title:"",type:"bi",status:"found",description:"",location:"",file:void 0}),_=[{label:"Bilhete de Identidade (BI)",value:"bi",icon:"fas fa-id-card"},{label:"Passaporte",value:"passport",icon:"fas fa-passport"},{label:"Carta de Condução",value:"driver_license",icon:"fas fa-id-card-alt"},{label:"DIRE",value:"dire",icon:"fas fa-id-card"},{label:"NUIT",value:"nuit",icon:"fas fa-file-invoice"},{label:"Cartão de Trabalho",value:"work_card",icon:"fas fa-briefcase"},{label:"Cartão de Estudante",value:"student_card",icon:"fas fa-graduation-cap"},{label:"Cartão de Eleitor",value:"voter_card",icon:"fas fa-vote-yea"},{label:"Certidão de Nascimento",value:"birth_certificate",icon:"fas fa-file-alt"},{label:"Título de Propriedade",value:"title_deed",icon:"fas fa-home"},{label:"Outro",value:"other",icon:"fas fa-file"}],h=s=>{const e="card flex flex-col items-center justify-center p-4 cursor-pointer transition-all";return s===a.type?`${e} border-2 border-success bg-success/5`:`${e} hover:border-success`},u=c(!1),V=T(()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)),w=()=>{V.value?u.value=!0:p.value?.click()},D=s=>{const t=s.target.files?.[0];t&&(a.file=t)},P=s=>{a.file=s},E=async()=>{if(!m.userId){l("Você precisa estar logado para relatar um documento"),i.push("/login");return}if(!a.title.trim()){l("Por favor, preencha o título do documento");return}if(!a.location.trim()){l("Por favor, informe onde encontrou o documento");return}if(!a.file){l("Por favor, adicione uma foto do documento");return}d.value=!0;const s=await k.createDocument(m.userId,a);d.value=!1,s.success?(C("Documento publicado com sucesso!"),i.push("/")):l(s.error||"Erro ao publicar documento")};return(s,e)=>(n(),B(L,{"show-bottom-nav":!1},{default:b(()=>[o("div",H,[o("div",K,[o("div",Q,[o("button",{class:"btn-icon mb-4",onClick:e[0]||(e[0]=t=>$(i).back())},[...e[6]||(e[6]=[o("i",{class:"fas fa-arrow-left"},null,-1)])]),e[7]||(e[7]=o("h1",{class:"text-2xl font-bold text-gray-900 dark:text-dark-text mb-2"}," Relatar Documento Encontrado ",-1)),e[8]||(e[8]=o("p",{class:"text-gray-600 dark:text-gray-400"}," Ajude alguém a recuperar seu documento ",-1))]),o("form",{onSubmit:v(E,["prevent"]),class:"space-y-6"},[o("div",W,[e[9]||(e[9]=o("label",{class:"form-label"},"Tipo de Documento *",-1)),o("div",X,[(n(),f(F,null,R(_,t=>o("button",{key:t.value,type:"button",class:x(h(t.value)),onClick:le=>a.type=t.value},[o("i",{class:x([t.icon,"text-2xl mb-2"])},null,2),o("span",Z,g(t.label),1)],10,Y)),64))])]),r(y,{modelValue:a.title,"onUpdate:modelValue":e[1]||(e[1]=t=>a.title=t),label:"Título do Documento",placeholder:"Ex: BI encontrado em Maputo",required:""},null,8,["modelValue"]),o("div",ee,[e[10]||(e[10]=o("label",{class:"form-label"},"Descrição",-1)),N(o("textarea",{"onUpdate:modelValue":e[2]||(e[2]=t=>a.description=t),class:"input min-h-[100px] resize-none",placeholder:"Descreva detalhes do documento encontrado..."},null,512),[[U,a.description]])]),r(y,{modelValue:a.location,"onUpdate:modelValue":e[3]||(e[3]=t=>a.location=t),label:"Onde encontrou?",placeholder:"Ex: Avenida Julius Nyerere, Maputo",icon:"fas fa-map-marker-alt",required:""},null,8,["modelValue"]),o("div",oe,[e[14]||(e[14]=o("label",{class:"form-label"},"Foto do Documento *",-1)),o("div",{class:"border-2 border-dashed border-gray-300 dark:border-dark-border rounded-lg p-6 text-center cursor-pointer hover:border-primary transition-colors",onClick:w},[a.file?(n(),f("div",ae,[e[13]||(e[13]=o("i",{class:"fas fa-file text-primary"},null,-1)),o("span",null,g(a.file.name),1),o("button",{type:"button",onClick:e[4]||(e[4]=v(t=>a.file=void 0,["stop"])),class:"text-danger"},[...e[12]||(e[12]=[o("i",{class:"fas fa-times"},null,-1)])])])):(n(),f("div",te,[...e[11]||(e[11]=[o("i",{class:"fas fa-cloud-upload-alt text-4xl text-gray-400 mb-2"},null,-1),o("p",{class:"text-gray-600 dark:text-gray-400"}," Clique para adicionar foto ",-1),o("p",{class:"text-xs text-gray-500 mt-2"}," Importante: Evite mostrar dados sensíveis ",-1)])]))]),o("input",{ref_key:"fileInputRef",ref:p,type:"file",accept:"image/*",class:"hidden",onChange:D},null,544)]),r(G,{modelValue:u.value,"onUpdate:modelValue":e[5]||(e[5]=t=>u.value=t),onFileSelected:P},null,8,["modelValue"]),r(j,{type:"submit",variant:"primary",size:"lg","full-width":"",loading:d.value,"loading-text":"Publicando..."},{default:b(()=>[...e[15]||(e[15]=[o("i",{class:"fas fa-paper-plane mr-2"},null,-1),A(" Publicar Documento Encontrado ",-1)])]),_:1},8,["loading"])],32)])]),r(q)]),_:1}))}});export{be as default};
