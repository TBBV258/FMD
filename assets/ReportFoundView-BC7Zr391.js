import{a as A,r as d,M as N,c as O,p as j,w as P,o as r,h as o,j as u,i as q,u as J,O as V,b as c,s as G,n as M,t as i,F as H,R as K,S as Q,e as p,k as f}from"./vue-vendor-DJ0JNZJp.js";import{u as W,b as X,T as Y,a as Z}from"./index-BkTEcezC.js";import{u as ee}from"./documents-P70nSbUL.js";import{_ as oe}from"./MainLayout.vue_vue_type_script_setup_true_lang-CCdKNcrq.js";import{_ as E}from"./BaseInput.vue_vue_type_script_setup_true_lang-CoC9VMDy.js";import{_ as te}from"./PhotoPickerModal.vue_vue_type_script_setup_true_lang-DB6UynX-.js";import{L as w}from"./LocationPicker-CZ0OQ5dm.js";import"./supabase-aQ0K3vAX.js";import"./logofmd-DeXnOIzE.js";import"./BaseModal-f_iGfpp1.js";import"./maplibre-XFgcxNEv.js";import"./useGeolocation-D46f4tYI.js";const ae={class:"px-4 py-6"},le={class:"max-w-2xl mx-auto"},se={class:"mb-6"},ne={class:"form-group"},re={class:"grid grid-cols-2 gap-3"},ie=["onClick"],de={class:"text-sm"},ue={class:"form-group"},ce={class:"space-y-2"},me={class:"flex items-center space-x-2"},fe={key:0,class:"bg-success/10 rounded-lg p-3 text-sm"},pe={class:"text-xs text-gray-600 dark:text-gray-400"},be={class:"space-y-2"},ve={class:"flex items-center space-x-2"},xe={key:0,class:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3 text-sm"},ge={class:"text-xs text-blue-700 dark:text-blue-300"},ke={class:"form-group"},ye={key:0},Ce={key:1,class:"flex items-center justify-center space-x-2"},ze=A({__name:"ReportFoundView",setup(Pe){const b=J(),y=W(),D=ee(),{success:S,error:m}=Z(),v=d(!1),C=d(null),a=N({title:"",type:"bi",status:"found",description:"",location:"",file:void 0}),L=[{label:"Bilhete de Identidade (BI)",value:"bi",icon:"fas fa-id-card"},{label:"Passaporte",value:"passport",icon:"fas fa-passport"},{label:"Carta de Condução",value:"driver_license",icon:"fas fa-id-card-alt"},{label:"DIRE",value:"dire",icon:"fas fa-id-card"},{label:"NUIT",value:"nuit",icon:"fas fa-file-invoice"},{label:"Cartão de Trabalho",value:"work_card",icon:"fas fa-briefcase"},{label:"Cartão de Estudante",value:"student_card",icon:"fas fa-graduation-cap"},{label:"Cartão de Eleitor",value:"voter_card",icon:"fas fa-vote-yea"},{label:"Certidão de Nascimento",value:"birth_certificate",icon:"fas fa-file-alt"},{label:"Título de Propriedade",value:"title_deed",icon:"fas fa-home"},{label:"Outro",value:"other",icon:"fas fa-file"}],I=l=>{const e="card flex flex-col items-center justify-center p-4 cursor-pointer transition-all";return l===a.type?`${e} border-2 border-success bg-success/5`:`${e} hover:border-success`},x=d(!1),g=d(!1),k=d(!1),s=d(null),n=d(null),T=O(()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)),$=()=>{T.value?x.value=!0:C.value?.click()},B=l=>{const t=l.target.files?.[0];t&&(a.file=t)},F=l=>{a.file=l},h=l=>{s.value=l},z=l=>{n.value=l},R=()=>{s.value=null},U=()=>{n.value=null},_=async()=>{if(!y.userId){m("Você precisa estar logado para relatar um documento"),b.push("/login");return}if(!a.title.trim()){m("Por favor, preencha o título do documento");return}if(!a.location.trim()){m("Por favor, informe onde encontrou o documento");return}if(!a.file){m("Por favor, adicione uma foto do documento");return}v.value=!0;const l=await D.createDocument(y.userId,a);v.value=!1,l.success?(S("Documento publicado com sucesso!"),b.push("/")):m(l.error||"Erro ao publicar documento")};return(l,e)=>(r(),j(oe,{"show-bottom-nav":!1},{default:P(()=>[o("div",ae,[o("div",le,[o("div",se,[o("button",{class:"btn-icon mb-4",onClick:e[0]||(e[0]=t=>q(b).back())},[...e[10]||(e[10]=[o("i",{class:"fas fa-arrow-left"},null,-1)])]),e[11]||(e[11]=o("h1",{class:"text-2xl font-bold text-gray-900 dark:text-dark-text mb-2"}," Relatar Documento Encontrado ",-1)),e[12]||(e[12]=o("p",{class:"text-gray-600 dark:text-gray-400"}," Ajude alguém a recuperar seu documento ",-1))]),o("form",{onSubmit:V(_,["prevent"]),class:"space-y-6"},[o("div",ne,[e[13]||(e[13]=o("label",{class:"form-label"},"Tipo de Documento *",-1)),o("div",re,[(r(),c(H,null,G(L,t=>o("button",{key:t.value,type:"button",class:M(I(t.value)),onClick:Ve=>a.type=t.value},[o("i",{class:M([t.icon,"text-2xl mb-2"])},null,2),o("span",de,i(t.label),1)],10,ie)),64))])]),u(E,{modelValue:a.title,"onUpdate:modelValue":e[1]||(e[1]=t=>a.title=t),label:"Título do Documento",placeholder:"Ex: BI encontrado em Maputo",required:""},null,8,["modelValue"]),o("div",ue,[e[14]||(e[14]=o("label",{class:"form-label"},"Descrição",-1)),K(o("textarea",{"onUpdate:modelValue":e[2]||(e[2]=t=>a.description=t),class:"input min-h-[100px] resize-none",placeholder:"Descreva detalhes do documento encontrado..."},null,512),[[Q,a.description]])]),u(E,{modelValue:a.location,"onUpdate:modelValue":e[3]||(e[3]=t=>a.location=t),label:"Onde encontrou?",placeholder:"Ex: Avenida Julius Nyerere, Maputo",icon:"fas fa-map-marker-alt",required:""},null,8,["modelValue"]),o("div",ce,[e[18]||(e[18]=o("label",{class:"form-label"},"Localização no Mapa (opcional)",-1)),o("div",me,[o("button",{type:"button",onClick:e[4]||(e[4]=t=>g.value=!0),class:"flex-1 btn btn-secondary"},[e[15]||(e[15]=o("i",{class:"fas fa-map-marked-alt mr-2"},null,-1)),f(" "+i(s.value?"Atualizar Localização":"Marcar no Mapa"),1)]),s.value?(r(),c("button",{key:0,type:"button",onClick:R,class:"btn-icon bg-red-100 text-danger hover:bg-red-200",title:"Remover localização"},[...e[16]||(e[16]=[o("i",{class:"fas fa-times"},null,-1)])])):p("",!0)]),s.value?(r(),c("div",fe,[e[17]||(e[17]=o("p",{class:"text-success-dark dark:text-success font-semibold mb-1"},[o("i",{class:"fas fa-check-circle mr-1"}),f(" Localização Marcada ")],-1)),o("p",pe," Lat: "+i(s.value.lat?.toFixed(6))+", Lng: "+i(s.value.lng?.toFixed(6)),1)])):p("",!0)]),o("div",be,[e[22]||(e[22]=o("label",{class:"form-label"},"Ponto de Encontro (opcional)",-1)),e[23]||(e[23]=o("p",{class:"text-xs text-gray-500 dark:text-gray-400 mb-2"}," Onde você pode se encontrar com o dono para devolver? ",-1)),o("div",ve,[o("button",{type:"button",onClick:e[5]||(e[5]=t=>k.value=!0),class:"flex-1 btn btn-outline"},[e[19]||(e[19]=o("i",{class:"fas fa-handshake mr-2"},null,-1)),f(" "+i(n.value?"Atualizar Ponto":"Marcar Ponto de Encontro"),1)]),n.value?(r(),c("button",{key:0,type:"button",onClick:U,class:"btn-icon bg-red-100 text-danger hover:bg-red-200",title:"Remover ponto"},[...e[20]||(e[20]=[o("i",{class:"fas fa-times"},null,-1)])])):p("",!0)]),n.value?(r(),c("div",xe,[e[21]||(e[21]=o("p",{class:"text-blue-900 dark:text-blue-100 font-semibold mb-1"},[o("i",{class:"fas fa-map-pin mr-1"}),f(" Ponto de Encontro Definido ")],-1)),o("p",ge," Lat: "+i(n.value.lat.toFixed(6))+", Lng: "+i(n.value.lng.toFixed(6)),1)])):p("",!0)]),o("div",ke,[e[27]||(e[27]=o("label",{class:"form-label"},"Foto do Documento *",-1)),o("div",{class:"border-2 border-dashed border-gray-300 dark:border-dark-border rounded-lg p-6 text-center cursor-pointer hover:border-primary transition-colors",onClick:$},[a.file?(r(),c("div",Ce,[e[26]||(e[26]=o("i",{class:"fas fa-file text-primary"},null,-1)),o("span",null,i(a.file.name),1),o("button",{type:"button",onClick:e[6]||(e[6]=V(t=>a.file=void 0,["stop"])),class:"text-danger"},[...e[25]||(e[25]=[o("i",{class:"fas fa-times"},null,-1)])])])):(r(),c("div",ye,[...e[24]||(e[24]=[o("i",{class:"fas fa-cloud-upload-alt text-4xl text-gray-400 mb-2"},null,-1),o("p",{class:"text-gray-600 dark:text-gray-400"}," Clique para adicionar foto ",-1),o("p",{class:"text-xs text-gray-500 mt-2"}," Importante: Evite mostrar dados sensíveis ",-1)])]))]),o("input",{ref_key:"fileInputRef",ref:C,type:"file",accept:"image/*",class:"hidden",onChange:B},null,544)]),u(te,{modelValue:x.value,"onUpdate:modelValue":e[7]||(e[7]=t=>x.value=t),onFileSelected:F},null,8,["modelValue"]),u(w,{modelValue:g.value,"onUpdate:modelValue":e[8]||(e[8]=t=>g.value=t),title:"Onde você encontrou o documento?",message:"Marque no mapa o local onde encontrou o documento. Isso ajuda o dono a verificar.","initial-location":s.value,onLocationSelected:h},null,8,["modelValue","initial-location"]),u(w,{modelValue:k.value,"onUpdate:modelValue":e[9]||(e[9]=t=>k.value=t),title:"Ponto de Encontro para Devolução",message:"Escolha um local público e seguro onde você pode devolver o documento ao dono.","initial-location":n.value,onLocationSelected:z},null,8,["modelValue","initial-location"]),u(X,{type:"submit",variant:"primary",size:"lg","full-width":"",loading:v.value,"loading-text":"Publicando..."},{default:P(()=>[...e[28]||(e[28]=[o("i",{class:"fas fa-paper-plane mr-2"},null,-1),f(" Publicar Documento Encontrado ",-1)])]),_:1},8,["loading"])],32)])]),u(Y)]),_:1}))}});export{ze as default};
