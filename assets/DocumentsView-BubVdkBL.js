var k=(B,p,o)=>new Promise((i,_)=>{var x=l=>{try{d(o.next(l))}catch(f){_(f)}},u=l=>{try{d(o.throw(l))}catch(f){_(f)}},d=l=>l.done?i(l.value):Promise.resolve(l.value).then(x,u);d((o=o.apply(B,p)).next())});import{a as J,r as w,c as b,l as q,p as L,w as g,o as r,h as t,j as v,b as n,k as y,t as c,s as D,n as C,F as S,i as T,u as G,e as E}from"./vue-vendor-CG29anWM.js";import{u as H}from"./documents-CYB_bCyt.js";import{u as K,a as Q,b as I,T as W}from"./index-BPcZyZem.js";import{_ as X}from"./MainLayout.vue_vue_type_script_setup_true_lang-7lOnz-va.js";import{_ as Y}from"./LoadingSkeleton.vue_vue_type_script_setup_true_lang-DS2kZKMC.js";import{_ as Z}from"./EmptyState.vue_vue_type_script_setup_true_lang-Blwee724.js";import"./supabase-DO0Dm75k.js";import"./logofmd-DeXnOIzE.js";const tt={class:"px-4 py-6"},et={class:"flex items-center justify-between mb-6"},st={class:"card mb-6"},at={class:"grid grid-cols-3 gap-4"},ot={class:"text-center"},rt={class:"text-2xl font-bold text-primary"},lt={class:"text-center"},nt={class:"text-2xl font-bold text-danger"},it={class:"text-center"},ct={class:"text-2xl font-bold text-success"},dt={class:"flex space-x-2 mb-4 overflow-x-auto"},ut=["onClick"],ft={key:0,class:"space-y-4"},mt={key:2,class:"space-y-3"},pt=["onClick"],_t={class:"flex items-start space-x-3"},xt={class:"w-16 h-16 rounded-lg bg-gray-200 dark:bg-gray-700 flex-shrink-0 overflow-hidden"},bt=["src","alt"],gt={key:1,class:"w-full h-full flex items-center justify-center"},vt={class:"flex-1 min-w-0"},yt={class:"flex items-start justify-between mb-1"},ht={class:"font-semibold text-gray-900 dark:text-dark-text truncate"},kt={key:0,class:"text-sm text-gray-600 dark:text-gray-400 line-clamp-1 mb-2"},wt={class:"flex items-center text-xs text-gray-500 space-x-3"},Dt={key:0},Nt=J({__name:"DocumentsView",setup(B){const p=G(),o=H(),i=K(),{success:_,error:x}=Q(),u=w("all"),d=w(!1),l=w(!1),f=[{label:"Todos",value:"all"},{label:"Perdidos",value:"lost"},{label:"Encontrados",value:"found"},{label:"Matches",value:"matched"},{label:"Devolvidos",value:"returned"}],$=b(()=>u.value==="all"?o.documents:o.documents.filter(a=>a.status===u.value)),N=b(()=>o.documents.length),U=b(()=>o.documents.filter(a=>a.status==="lost").length),R=b(()=>o.documents.filter(a=>a.status==="found").length),V=a=>{const e="px-4 py-2 rounded-full text-sm font-medium transition-colors whitespace-nowrap";return a===u.value?`${e} bg-primary text-white`:`${e} bg-gray-100 dark:bg-dark-card text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-800`},O=a=>({lost:"badge badge-danger",found:"badge badge-success",matched:"badge bg-purple-500/10 text-purple-500",returned:"badge badge-success",normal:"badge badge-primary"})[a]||"badge badge-primary",M=a=>({lost:"Perdido",found:"Encontrado",matched:"Match",returned:"Devolvido",normal:"Normal"})[a]||a,F=a=>({passport:"fas fa-passport",id_card:"fas fa-id-card",bi:"fas fa-id-card",driver_license:"fas fa-id-card",birth_certificate:"fas fa-file-alt",other:"fas fa-file"})[a]||"fas fa-file",P=a=>new Date(a).toLocaleDateString("pt-BR",{day:"2-digit",month:"short",year:"numeric"}),z=()=>k(this,null,function*(){var a,e;try{l.value=!0,i.userId&&(yield o.fetchUserDocuments(i.userId,!0));const s={user:{id:(a=i.user)==null?void 0:a.id,email:(e=i.user)==null?void 0:e.email,profile:i.profile},documents:o.documents,exportDate:new Date().toISOString(),version:"2.0.0"},h=JSON.stringify(s,null,2),A=new Blob([h],{type:"application/json"}),j=URL.createObjectURL(A),m=document.createElement("a");m.href=j,m.download=`findmydocs_backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(j),_("Backup baixado com sucesso!")}catch(s){console.error("Download backup error:",s),x("Erro ao baixar backup")}finally{l.value=!1}});return q(()=>k(this,null,function*(){if(!i.userId){x("Usuário não autenticado");return}d.value=!0,yield o.fetchUserDocuments(i.userId,!0),d.value=!1})),(a,e)=>(r(),L(X,null,{default:g(()=>[t("div",tt,[t("div",et,[e[2]||(e[2]=t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-dark-text"},"Meus Documentos",-1)),v(I,{variant:"outline",size:"sm",onClick:z,loading:l.value},{default:g(()=>[...e[1]||(e[1]=[t("i",{class:"fas fa-download mr-2"},null,-1),y(" Backup ",-1)])]),_:1},8,["loading"])]),t("div",st,[t("div",at,[t("div",ot,[t("p",rt,c(N.value),1),e[3]||(e[3]=t("p",{class:"text-xs text-gray-500"},"Total",-1))]),t("div",lt,[t("p",nt,c(U.value),1),e[4]||(e[4]=t("p",{class:"text-xs text-gray-500"},"Perdidos",-1))]),t("div",it,[t("p",ct,c(R.value),1),e[5]||(e[5]=t("p",{class:"text-xs text-gray-500"},"Encontrados",-1))])])]),t("div",dt,[(r(),n(S,null,D(f,s=>t("button",{key:s.value,class:C(V(s.value)),onClick:h=>u.value=s.value},c(s.label),11,ut)),64))]),d.value?(r(),n("div",ft,[(r(),n(S,null,D(3,s=>v(Y,{key:s,type:"card"})),64))])):$.value.length===0?(r(),L(Z,{key:1,icon:"fas fa-file-alt",title:"Nenhum documento encontrado",description:"Você ainda não cadastrou nenhum documento."},{default:g(()=>[v(I,{variant:"primary",onClick:e[0]||(e[0]=s=>T(p).push("/report-lost"))},{default:g(()=>[...e[6]||(e[6]=[t("i",{class:"fas fa-plus mr-2"},null,-1),y(" Adicionar Documento ",-1)])]),_:1})]),_:1})):(r(),n("div",mt,[(r(!0),n(S,null,D($.value,s=>(r(),n("div",{key:s.id,class:"card card-hover cursor-pointer",onClick:h=>T(p).push(`/document/${s.id}`)},[t("div",_t,[t("div",xt,[s.thumbnail_url||s.file_url?(r(),n("img",{key:0,src:s.thumbnail_url||s.file_url,alt:s.title,class:"w-full h-full object-cover"},null,8,bt)):(r(),n("div",gt,[t("i",{class:C([F(s.type),"text-gray-400 text-2xl"])},null,2)]))]),t("div",vt,[t("div",yt,[t("h3",ht,c(s.title),1),t("span",{class:C([O(s.status),"ml-2"])},c(M(s.status)),3)]),s.description?(r(),n("p",kt,c(s.description),1)):E("",!0),t("div",wt,[t("span",null,[e[7]||(e[7]=t("i",{class:"fas fa-calendar mr-1"},null,-1)),y(" "+c(P(s.created_at)),1)]),s.location?(r(),n("span",Dt,[e[8]||(e[8]=t("i",{class:"fas fa-map-marker-alt mr-1"},null,-1)),y(" "+c(s.location),1)])):E("",!0)])])])],8,pt))),128))]))]),v(W)]),_:1}))}});export{Nt as default};
