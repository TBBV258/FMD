var g=(x,i,r)=>new Promise((p,c)=>{var l=o=>{try{n(r.next(o))}catch(u){c(u)}},d=o=>{try{n(r.throw(o))}catch(u){c(u)}},n=o=>o.done?p(o.value):Promise.resolve(o.value).then(l,d);n((r=r.apply(x,i)).next())});import{a as T,r as y,M as S,p as B,w as k,o as f,h as t,j as m,i as $,u as P,O as C,b as v,s as R,n as _,t as D,F,R as N,S as M,k as j}from"./vue-vendor-CG29anWM.js";import{u as U,b as q,T as z,a as A}from"./index-kKZCKLVg.js";import{u as O}from"./documents-BuJSUD-D.js";import{_ as J}from"./MainLayout.vue_vue_type_script_setup_true_lang-BMMkysOY.js";import{_ as h}from"./BaseInput.vue_vue_type_script_setup_true_lang-CLqNeAgL.js";import"./supabase-DO0Dm75k.js";import"./logofmd-DeXnOIzE.js";const L={class:"px-4 py-6"},G={class:"max-w-2xl mx-auto"},H={class:"mb-6"},K={class:"form-group"},Q={class:"grid grid-cols-2 gap-3"},W=["onClick"],X={class:"text-sm"},Y={class:"form-group"},Z={class:"form-group"},ee={key:0},te={key:1,class:"flex items-center justify-center space-x-2"},ue=T({__name:"ReportFoundView",setup(x){const i=P(),r=U(),p=O(),{success:c,error:l}=A(),d=y(!1),n=y(null),o=S({title:"",type:"bi",status:"found",description:"",location:"",file:void 0}),u=[{label:"Bilhete de Identidade (BI)",value:"bi",icon:"fas fa-id-card"},{label:"Passaporte",value:"passport",icon:"fas fa-passport"},{label:"Carta de Condução",value:"driver_license",icon:"fas fa-id-card-alt"},{label:"DIRE",value:"dire",icon:"fas fa-id-card"},{label:"NUIT",value:"nuit",icon:"fas fa-file-invoice"},{label:"Cartão de Trabalho",value:"work_card",icon:"fas fa-briefcase"},{label:"Cartão de Estudante",value:"student_card",icon:"fas fa-graduation-cap"},{label:"Cartão de Eleitor",value:"voter_card",icon:"fas fa-vote-yea"},{label:"Certidão de Nascimento",value:"birth_certificate",icon:"fas fa-file-alt"},{label:"Título de Propriedade",value:"title_deed",icon:"fas fa-home"},{label:"Outro",value:"other",icon:"fas fa-file"}],w=s=>{const e="card flex flex-col items-center justify-center p-4 cursor-pointer transition-all";return s===o.type?`${e} border-2 border-success bg-success/5`:`${e} hover:border-success`},V=()=>{var s;(s=n.value)==null||s.click()},E=s=>{var b;const a=(b=s.target.files)==null?void 0:b[0];a&&(o.file=a)},I=()=>g(this,null,function*(){if(!r.userId){l("Você precisa estar logado para relatar um documento"),i.push("/login");return}if(!o.title.trim()){l("Por favor, preencha o título do documento");return}if(!o.location.trim()){l("Por favor, informe onde encontrou o documento");return}if(!o.file){l("Por favor, adicione uma foto do documento");return}d.value=!0;const s=yield p.createDocument(r.userId,o);d.value=!1,s.success?(c("Documento publicado com sucesso!"),i.push("/")):l(s.error||"Erro ao publicar documento")});return(s,e)=>(f(),B(J,{"show-bottom-nav":!1},{default:k(()=>[t("div",L,[t("div",G,[t("div",H,[t("button",{class:"btn-icon mb-4",onClick:e[0]||(e[0]=a=>$(i).back())},[...e[5]||(e[5]=[t("i",{class:"fas fa-arrow-left"},null,-1)])]),e[6]||(e[6]=t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-dark-text mb-2"}," Relatar Documento Encontrado ",-1)),e[7]||(e[7]=t("p",{class:"text-gray-600 dark:text-gray-400"}," Ajude alguém a recuperar seu documento ",-1))]),t("form",{onSubmit:C(I,["prevent"]),class:"space-y-6"},[t("div",K,[e[8]||(e[8]=t("label",{class:"form-label"},"Tipo de Documento *",-1)),t("div",Q,[(f(),v(F,null,R(u,a=>t("button",{key:a.value,type:"button",class:_(w(a.value)),onClick:b=>o.type=a.value},[t("i",{class:_([a.icon,"text-2xl mb-2"])},null,2),t("span",X,D(a.label),1)],10,W)),64))])]),m(h,{modelValue:o.title,"onUpdate:modelValue":e[1]||(e[1]=a=>o.title=a),label:"Título do Documento",placeholder:"Ex: BI encontrado em Maputo",required:""},null,8,["modelValue"]),t("div",Y,[e[9]||(e[9]=t("label",{class:"form-label"},"Descrição",-1)),N(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=a=>o.description=a),class:"input min-h-[100px] resize-none",placeholder:"Descreva detalhes do documento encontrado..."},null,512),[[M,o.description]])]),m(h,{modelValue:o.location,"onUpdate:modelValue":e[3]||(e[3]=a=>o.location=a),label:"Onde encontrou?",placeholder:"Ex: Avenida Julius Nyerere, Maputo",icon:"fas fa-map-marker-alt",required:""},null,8,["modelValue"]),t("div",Z,[e[13]||(e[13]=t("label",{class:"form-label"},"Foto do Documento *",-1)),t("div",{class:"border-2 border-dashed border-gray-300 dark:border-dark-border rounded-lg p-6 text-center cursor-pointer hover:border-primary transition-colors",onClick:V},[o.file?(f(),v("div",te,[e[12]||(e[12]=t("i",{class:"fas fa-file text-primary"},null,-1)),t("span",null,D(o.file.name),1),t("button",{type:"button",onClick:e[4]||(e[4]=C(a=>o.file=void 0,["stop"])),class:"text-danger"},[...e[11]||(e[11]=[t("i",{class:"fas fa-times"},null,-1)])])])):(f(),v("div",ee,[...e[10]||(e[10]=[t("i",{class:"fas fa-cloud-upload-alt text-4xl text-gray-400 mb-2"},null,-1),t("p",{class:"text-gray-600 dark:text-gray-400"}," Clique para adicionar foto ",-1),t("p",{class:"text-xs text-gray-500 mt-2"}," Importante: Evite mostrar dados sensíveis ",-1)])]))]),t("input",{ref_key:"fileInputRef",ref:n,type:"file",accept:"image/*",class:"hidden",onChange:E},null,544)]),m(q,{type:"submit",variant:"primary",size:"lg","full-width":"",loading:d.value,"loading-text":"Publicando..."},{default:k(()=>[...e[14]||(e[14]=[t("i",{class:"fas fa-paper-plane mr-2"},null,-1),j(" Publicar Documento Encontrado ",-1)])]),_:1},8,["loading"])],32)])]),m(z)]),_:1}))}});export{ue as default};
