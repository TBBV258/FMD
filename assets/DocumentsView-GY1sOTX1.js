var C=(l,f,c)=>new Promise((d,v)=>{var k=n=>{try{m(c.next(n))}catch(u){v(u)}},w=n=>{try{m(c.throw(n))}catch(u){v(u)}},m=n=>n.done?d(n.value):Promise.resolve(n.value).then(k,w);m((c=c.apply(l,f)).next())});import{a as N,b as r,o,h as t,f as G,n as g,t as i,p as B,e as h,w as p,k as b,r as T,c as y,l as H,j as _,s as $,F as S,i as j,u as K}from"./vue-vendor-CG29anWM.js";import{b as L,u as Q,a as W,T as X}from"./index-kKZCKLVg.js";import{u as Y}from"./useDocuments-DJYFZ6G-.js";import{_ as Z}from"./MainLayout.vue_vue_type_script_setup_true_lang-BMMkysOY.js";import{_ as tt}from"./LoadingSkeleton.vue_vue_type_script_setup_true_lang-DS2kZKMC.js";import"./supabase-DO0Dm75k.js";import"./supabase-B9ALGzFB.js";import"./logofmd-DeXnOIzE.js";const et={class:"flex flex-col items-center justify-center py-12 px-4 text-center"},st={class:"mb-4"},at={class:"w-20 h-20 bg-gray-100 dark:bg-dark-card rounded-full flex items-center justify-center"},ot={class:"text-lg font-semibold text-gray-900 dark:text-dark-text mb-2"},lt={class:"text-gray-600 dark:text-gray-400 mb-6 max-w-sm"},nt=N({__name:"EmptyState",props:{icon:{default:"fas fa-inbox"},title:{},description:{},actionLabel:{},actionIcon:{},actionClick:{}},setup(l){return(f,c)=>(o(),r("div",et,[t("div",st,[t("div",at,[t("i",{class:g([l.icon,"text-gray-400 text-3xl"])},null,2)])]),t("h3",ot,i(l.title),1),t("p",lt,i(l.description),1),G(f.$slots,"action",{},()=>[l.actionLabel&&l.actionClick?(o(),B(L,{key:0,variant:"primary",onClick:l.actionClick},{default:p(()=>[l.actionIcon?(o(),r("i",{key:0,class:g([l.actionIcon,"mr-2"])},null,2)):h("",!0),b(" "+i(l.actionLabel),1)]),_:1},8,["onClick"])):h("",!0)])]))}}),rt={class:"px-4 py-6"},it={class:"flex items-center justify-between mb-6"},ct={class:"card mb-6"},dt={class:"grid grid-cols-3 gap-4"},ut={class:"text-center"},ft={class:"text-2xl font-bold text-primary"},mt={class:"text-center"},xt={class:"text-2xl font-bold text-danger"},pt={class:"text-center"},bt={class:"text-2xl font-bold text-success"},gt={class:"flex space-x-2 mb-4 overflow-x-auto"},vt=["onClick"],yt={key:0,class:"space-y-4"},_t={key:2,class:"space-y-3"},ht=["onClick"],kt={class:"flex items-start space-x-3"},wt={class:"w-16 h-16 rounded-lg bg-gray-200 dark:bg-gray-700 flex-shrink-0 overflow-hidden"},Dt=["src","alt"],Ct={key:1,class:"w-full h-full flex items-center justify-center"},$t={class:"flex-1 min-w-0"},St={class:"flex items-start justify-between mb-1"},jt={class:"font-semibold text-gray-900 dark:text-dark-text truncate"},Bt={key:0,class:"text-sm text-gray-600 dark:text-gray-400 line-clamp-1 mb-2"},Lt={class:"flex items-center text-xs text-gray-500 space-x-3"},Et={key:0},Pt=N({__name:"DocumentsView",setup(l){const f=K(),c=Q(),{items:d,loading:v,fetchMyDocuments:k}=Y(),{success:w,error:m}=W(),n=T("all"),u=T(!1),R=[{label:"Todos",value:"all"},{label:"Perdidos",value:"lost"},{label:"Encontrados",value:"found"},{label:"Matches",value:"matched"},{label:"Devolvidos",value:"returned"}],E=y(()=>n.value==="all"?d.value:d.value.filter(a=>a.status===n.value)),V=y(()=>d.value.length),M=y(()=>d.value.filter(a=>a.status==="lost").length),O=y(()=>d.value.filter(a=>a.status==="found").length),U=a=>{const e="px-4 py-2 rounded-full text-sm font-medium transition-colors whitespace-nowrap";return a===n.value?`${e} bg-primary text-white`:`${e} bg-gray-100 dark:bg-dark-card text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-800`},F=a=>({lost:"badge badge-danger",found:"badge badge-success",matched:"badge bg-purple-500/10 text-purple-500",returned:"badge badge-success",normal:"badge badge-primary"})[a]||"badge badge-primary",P=a=>({lost:"Perdido",found:"Encontrado",matched:"Match",returned:"Devolvido",normal:"Normal"})[a]||a,z=a=>({passport:"fas fa-passport",id_card:"fas fa-id-card",bi:"fas fa-id-card",driver_license:"fas fa-id-card",birth_certificate:"fas fa-file-alt",other:"fas fa-file"})[a]||"fas fa-file",A=a=>new Date(a).toLocaleDateString("pt-BR",{day:"2-digit",month:"short",year:"numeric"}),J=()=>C(this,null,function*(){var a,e;try{u.value=!0;const s={user:{id:(a=c.user)==null?void 0:a.id,email:(e=c.user)==null?void 0:e.email,profile:c.profile},documents:d.value,exportDate:new Date().toISOString(),version:"2.0.0"},D=JSON.stringify(s,null,2),q=new Blob([D],{type:"application/json"}),I=URL.createObjectURL(q),x=document.createElement("a");x.href=I,x.download=`findmydocs_backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(I),w("Backup baixado com sucesso!")}catch(s){console.error("Download backup error:",s),m("Erro ao baixar backup")}finally{u.value=!1}});return H(()=>C(this,null,function*(){if(!c.userId){m("Usuário não autenticado");return}yield k(c.userId)})),(a,e)=>(o(),B(Z,null,{default:p(()=>[t("div",rt,[t("div",it,[e[2]||(e[2]=t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-dark-text"},"Meus Documentos",-1)),_(L,{variant:"outline",size:"sm",onClick:J,loading:u.value},{default:p(()=>[...e[1]||(e[1]=[t("i",{class:"fas fa-download mr-2"},null,-1),b(" Backup ",-1)])]),_:1},8,["loading"])]),t("div",ct,[t("div",dt,[t("div",ut,[t("p",ft,i(V.value),1),e[3]||(e[3]=t("p",{class:"text-xs text-gray-500"},"Total",-1))]),t("div",mt,[t("p",xt,i(M.value),1),e[4]||(e[4]=t("p",{class:"text-xs text-gray-500"},"Perdidos",-1))]),t("div",pt,[t("p",bt,i(O.value),1),e[5]||(e[5]=t("p",{class:"text-xs text-gray-500"},"Encontrados",-1))])])]),t("div",gt,[(o(),r(S,null,$(R,s=>t("button",{key:s.value,class:g(U(s.value)),onClick:D=>n.value=s.value},i(s.label),11,vt)),64))]),j(v)?(o(),r("div",yt,[(o(),r(S,null,$(3,s=>_(tt,{key:s,type:"card"})),64))])):E.value.length===0?(o(),B(nt,{key:1,icon:"fas fa-file-alt",title:"Nenhum documento encontrado",message:"Você ainda não cadastrou nenhum documento."},{default:p(()=>[_(L,{variant:"primary",onClick:e[0]||(e[0]=s=>j(f).push("/report-lost"))},{default:p(()=>[...e[6]||(e[6]=[t("i",{class:"fas fa-plus mr-2"},null,-1),b(" Adicionar Documento ",-1)])]),_:1})]),_:1})):(o(),r("div",_t,[(o(!0),r(S,null,$(E.value,s=>(o(),r("div",{key:s.id,class:"card card-hover cursor-pointer",onClick:D=>j(f).push(`/document/${s.id}`)},[t("div",kt,[t("div",wt,[s.thumbnail_url||s.file_url?(o(),r("img",{key:0,src:s.thumbnail_url||s.file_url,alt:s.title,class:"w-full h-full object-cover"},null,8,Dt)):(o(),r("div",Ct,[t("i",{class:g([z(s.type),"text-gray-400 text-2xl"])},null,2)]))]),t("div",$t,[t("div",St,[t("h3",jt,i(s.title),1),t("span",{class:g([F(s.status),"ml-2"])},i(P(s.status)),3)]),s.description?(o(),r("p",Bt,i(s.description),1)):h("",!0),t("div",Lt,[t("span",null,[e[7]||(e[7]=t("i",{class:"fas fa-calendar mr-1"},null,-1)),b(" "+i(A(s.created_at)),1)]),s.location?(o(),r("span",Et,[e[8]||(e[8]=t("i",{class:"fas fa-map-marker-alt mr-1"},null,-1)),b(" "+i(s.location),1)])):h("",!0)])])])],8,ht))),128))]))]),_(X)]),_:1}))}});export{Pt as default};
