import{a as z,r as w,P as A,c,l as E,p as R,w as m,o as r,h as e,j as n,i as o,u as T,b as l,e as d,n as f,k as v,t as i}from"./vue-vendor-DJ0JNZJp.js";import{u as I,a as P,b as g,T as M}from"./index-DomtK_OL.js";import{u as q}from"./documents-CDbBztGH.js";import{_ as O}from"./MainLayout.vue_vue_type_script_setup_true_lang-s1TSJ6UG.js";import{_ as F}from"./LoadingSkeleton.vue_vue_type_script_setup_true_lang-D4yD_4qG.js";import"./supabase-aQ0K3vAX.js";import"./logofmd-DeXnOIzE.js";const G={class:"min-h-screen bg-gray-50 dark:bg-dark-bg"},H={class:"fixed top-0 left-0 right-0 z-40 bg-white/90 dark:bg-dark-card/90 backdrop-blur-sm border-b border-gray-200 dark:border-dark-border pt-safe"},J={class:"flex items-center justify-between px-4 h-14"},K={class:"pt-14 pb-safe"},Q={key:0,class:"p-4"},U={key:1,class:"max-w-2xl mx-auto"},W={class:"relative aspect-square bg-gray-200 dark:bg-dark-card"},X=["src","alt"],Y={key:1,class:"w-full h-full flex items-center justify-center"},Z={key:2,class:"absolute inset-0 flex items-center justify-center bg-black/20 backdrop-blur-sm"},tt={class:"text-center p-4 bg-white/90 dark:bg-dark-card/90 rounded-lg shadow-lg"},et={class:"p-4 space-y-6"},st={class:"flex items-center space-x-2"},at={class:"badge badge-primary"},rt={class:"text-2xl font-bold text-gray-900 dark:text-dark-text mb-2"},lt={class:"card space-y-3"},ot={key:0,class:"flex items-start"},it={class:"flex-1 relative"},nt={key:0,class:"absolute inset-0 flex items-center justify-center"},dt={key:1,class:"flex items-start"},ut={class:"flex-1"},ct={class:"font-medium"},mt={class:"flex items-start"},ft={class:"flex-1"},vt={class:"font-medium"},pt={key:2,class:"flex items-start"},gt={class:"flex-1"},bt={class:"font-medium"},xt={class:"space-y-2"},yt={key:2,class:"flex flex-col items-center justify-center min-h-[60vh] px-4"},St=z({__name:"DocumentDetailView",setup(_t){const p=T(),D=A(),u=I(),y=q(),{success:_,error:C}=P(),b=w(!0),s=w(null),x=D.params.id,$=c(()=>s.value?{lost:"badge badge-danger",found:"badge bg-orange-500 text-white",matched:"badge bg-purple-500/10 text-purple-500",returned:"badge badge-success"}[s.value.status]||"badge badge-primary":""),B=c(()=>s.value?{lost:"Perdido",found:"Submetido por utilizador",matched:"Match",returned:"Devolvido",normal:"Normal"}[s.value.status]||s.value.status:""),S=c(()=>s.value?{passport:"fas fa-passport",id_card:"fas fa-id-card",driver_license:"fas fa-id-card-alt",birth_certificate:"fas fa-file-alt",other:"fas fa-file"}[s.value.type]||"fas fa-file":""),j=c(()=>s.value?{passport:"Passaporte",id_card:"Bilhete de Identidade",driver_license:"Carta de Condução",birth_certificate:"Certidão de Nascimento",other:"Outro Documento"}[s.value.type]||"Documento":""),L=c(()=>s.value?new Date(s.value.created_at).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}):""),N=a=>new Date(a).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"}),V=()=>{s.value&&p.push(`/chat/${x}`)},k=async()=>{if(!s.value)return;const a={title:s.value.title,text:`${s.value.title} - ${s.value.description||"Ver documento"}`,url:`${window.location.origin}/document/${x}`};try{navigator.share?(await navigator.share(a),_("Documento compartilhado!")):(await navigator.clipboard.writeText(a.url),_("Link copiado para área de transferência!"))}catch(t){console.error("Error sharing:",t)}};return E(async()=>{b.value=!0;const a=await y.fetchDocumentById(x);a.success?s.value=y.currentDocument:C(a.error||"Erro ao carregar documento"),b.value=!1}),(a,t)=>(r(),R(O,{"show-top-bar":!1},{default:m(()=>[e("div",G,[e("header",H,[e("div",J,[e("button",{class:"btn-icon",onClick:t[0]||(t[0]=h=>o(p).back())},[...t[3]||(t[3]=[e("i",{class:"fas fa-arrow-left"},null,-1)])]),t[5]||(t[5]=e("h1",{class:"text-lg font-semibold"},"Detalhes",-1)),e("button",{class:"btn-icon",onClick:k},[...t[4]||(t[4]=[e("i",{class:"fas fa-share-alt"},null,-1)])])])]),e("div",K,[b.value?(r(),l("div",Q,[n(F,{type:"card"})])):s.value?(r(),l("div",U,[e("div",W,[s.value.file_url||s.value.thumbnail_url?(r(),l("img",{key:0,src:s.value.file_url||s.value.thumbnail_url,alt:s.value.title,class:f(["w-full h-full object-cover",o(u).isAuthenticated?"":"blur-md"])},null,10,X)):(r(),l("div",Y,[...t[6]||(t[6]=[e("i",{class:"fas fa-file text-gray-400 text-8xl"},null,-1)])])),o(u).isAuthenticated?d("",!0):(r(),l("div",Z,[e("div",tt,[t[8]||(t[8]=e("i",{class:"fas fa-lock text-2xl text-gray-600 mb-2"},null,-1)),t[9]||(t[9]=e("p",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300"},"Registe-se para ver",-1)),n(g,{variant:"primary",size:"sm",class:"mt-2",onClick:t[1]||(t[1]=h=>o(p).push("/login"))},{default:m(()=>[...t[7]||(t[7]=[v(" Registar ",-1)])]),_:1})])]))]),e("div",et,[e("div",st,[e("span",{class:f($.value)},i(B.value),3),e("span",at,[e("i",{class:f([S.value,"mr-1"])},null,2),v(" "+i(j.value),1)])]),e("div",null,[e("h2",rt,i(s.value.title),1),s.value.description?(r(),l("p",{key:0,class:f(["text-gray-600 dark:text-gray-400",o(u).isAuthenticated?"":"blur-sm select-none"])},i(s.value.description),3)):d("",!0)]),e("div",lt,[s.value.document_number?(r(),l("div",ot,[t[12]||(t[12]=e("i",{class:"fas fa-hashtag text-gray-400 w-6 mt-1"},null,-1)),e("div",it,[t[11]||(t[11]=e("p",{class:"text-sm text-gray-500"},"Número do Documento",-1)),e("p",{class:f(["font-medium",o(u).isAuthenticated?"":"blur-sm select-none"])},i(s.value.document_number),3),o(u).isAuthenticated?d("",!0):(r(),l("div",nt,[...t[10]||(t[10]=[e("i",{class:"fas fa-lock text-xs text-gray-400"},null,-1)])]))])])):d("",!0),s.value.location?(r(),l("div",dt,[t[14]||(t[14]=e("i",{class:"fas fa-map-marker-alt text-gray-400 w-6 mt-1"},null,-1)),e("div",ut,[t[13]||(t[13]=e("p",{class:"text-sm text-gray-500"},"Local",-1)),e("p",ct,i(s.value.location),1)])])):d("",!0),e("div",mt,[t[16]||(t[16]=e("i",{class:"fas fa-clock text-gray-400 w-6 mt-1"},null,-1)),e("div",ft,[t[15]||(t[15]=e("p",{class:"text-sm text-gray-500"},"Data de Publicação",-1)),e("p",vt,i(L.value),1)])]),s.value.issue_date?(r(),l("div",pt,[t[18]||(t[18]=e("i",{class:"fas fa-calendar text-gray-400 w-6 mt-1"},null,-1)),e("div",gt,[t[17]||(t[17]=e("p",{class:"text-sm text-gray-500"},"Data de Emissão",-1)),e("p",bt,i(N(s.value.issue_date)),1)])])):d("",!0)]),e("div",xt,[n(g,{variant:"primary",size:"lg","full-width":"",onClick:V},{default:m(()=>[...t[19]||(t[19]=[e("i",{class:"fas fa-comment-dots mr-2"},null,-1),v(" Entrar em Contacto ",-1)])]),_:1}),n(g,{variant:"outline",size:"lg","full-width":"",onClick:k},{default:m(()=>[...t[20]||(t[20]=[e("i",{class:"fas fa-share-alt mr-2"},null,-1),v(" Compartilhar ",-1)])]),_:1})])])])):(r(),l("div",yt,[t[22]||(t[22]=e("i",{class:"fas fa-exclamation-triangle text-gray-400 text-6xl mb-4"},null,-1)),t[23]||(t[23]=e("h3",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2"}," Documento não encontrado ",-1)),n(g,{variant:"primary",onClick:t[2]||(t[2]=h=>o(p).back())},{default:m(()=>[...t[21]||(t[21]=[v(" Voltar ",-1)])]),_:1})]))]),n(M)])]),_:1}))}});export{St as default};
