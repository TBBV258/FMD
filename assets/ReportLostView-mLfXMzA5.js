var y=(g,i,s)=>new Promise((p,f)=>{var n=o=>{try{r(s.next(o))}catch(u){f(u)}},d=o=>{try{r(s.throw(o))}catch(u){f(u)}},r=o=>o.done?p(o.value):Promise.resolve(o.value).then(n,d);r((s=s.apply(g,i)).next())});import{a as S,r as k,M as E,p as N,w as C,o as m,h as a,j as c,i as P,u as B,O as D,b as v,s as $,n as V,t as _,F as R,R as F,S as U,k as j}from"./vue-vendor-CG29anWM.js";import{u as M,b as z,T as O,a as q}from"./index-BIymAigv.js";import{u as A}from"./documents-CbSHPapH.js";import{_ as L}from"./MainLayout.vue_vue_type_script_setup_true_lang-BJccNfj3.js";import{_ as x}from"./BaseInput.vue_vue_type_script_setup_true_lang-CLqNeAgL.js";import"./supabase-DO0Dm75k.js";import"./logofmd-DeXnOIzE.js";const J={class:"px-4 py-6"},G={class:"max-w-2xl mx-auto"},H={class:"mb-6"},K={class:"form-group"},Q={class:"grid grid-cols-2 gap-3"},W=["onClick"],X={class:"text-sm"},Y={class:"form-group"},Z={class:"form-group"},ee={key:0},ae={key:1,class:"flex items-center justify-center space-x-2"},ue=S({__name:"ReportLostView",setup(g){const i=B(),s=M(),p=A(),{success:f,error:n}=q(),d=k(!1),r=k(null),o=E({title:"",type:"bi",status:"lost",description:"",location:"",documentNumber:"",file:void 0}),u=[{label:"Bilhete de Identidade (BI)",value:"bi",icon:"fas fa-id-card"},{label:"Passaporte",value:"passport",icon:"fas fa-passport"},{label:"Carta de Condução",value:"driver_license",icon:"fas fa-id-card-alt"},{label:"DIRE",value:"dire",icon:"fas fa-id-card"},{label:"NUIT",value:"nuit",icon:"fas fa-file-invoice"},{label:"Cartão de Trabalho",value:"work_card",icon:"fas fa-briefcase"},{label:"Cartão de Estudante",value:"student_card",icon:"fas fa-graduation-cap"},{label:"Cartão de Eleitor",value:"voter_card",icon:"fas fa-vote-yea"},{label:"Certidão de Nascimento",value:"birth_certificate",icon:"fas fa-file-alt"},{label:"Título de Propriedade",value:"title_deed",icon:"fas fa-home"},{label:"Outro",value:"other",icon:"fas fa-file"}],h=l=>{const e="card flex flex-col items-center justify-center p-4 cursor-pointer transition-all";return l===o.type?`${e} border-2 border-primary bg-primary/5`:`${e} hover:border-primary`},w=()=>{var l;(l=r.value)==null||l.click()},I=l=>{var b;const t=(b=l.target.files)==null?void 0:b[0];t&&(o.file=t)},T=()=>y(this,null,function*(){if(!s.userId){n("Você precisa estar logado para relatar um documento"),i.push("/login");return}if(!o.title.trim()){n("Por favor, preencha o título do documento");return}d.value=!0;const l=yield p.createDocument(s.userId,o);d.value=!1,l.success?(f("Documento publicado com sucesso!"),i.push("/")):n(l.error||"Erro ao publicar documento")});return(l,e)=>(m(),N(L,{"show-bottom-nav":!1},{default:C(()=>[a("div",J,[a("div",G,[a("div",H,[a("button",{class:"btn-icon mb-4",onClick:e[0]||(e[0]=t=>P(i).back())},[...e[6]||(e[6]=[a("i",{class:"fas fa-arrow-left"},null,-1)])]),e[7]||(e[7]=a("h1",{class:"text-2xl font-bold text-gray-900 dark:text-dark-text mb-2"}," Relatar Documento Perdido ",-1)),e[8]||(e[8]=a("p",{class:"text-gray-600 dark:text-gray-400"}," Preencha as informações para ajudarmos a encontrar seu documento ",-1))]),a("form",{onSubmit:D(T,["prevent"]),class:"space-y-6"},[a("div",K,[e[9]||(e[9]=a("label",{class:"form-label"},"Tipo de Documento *",-1)),a("div",Q,[(m(),v(R,null,$(u,t=>a("button",{key:t.value,type:"button",class:V(h(t.value)),onClick:b=>o.type=t.value},[a("i",{class:V([t.icon,"text-2xl mb-2"])},null,2),a("span",X,_(t.label),1)],10,W)),64))])]),c(x,{modelValue:o.title,"onUpdate:modelValue":e[1]||(e[1]=t=>o.title=t),label:"Título do Documento",placeholder:"Ex: BI João Silva",required:""},null,8,["modelValue"]),a("div",Y,[e[10]||(e[10]=a("label",{class:"form-label"},"Descrição",-1)),F(a("textarea",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.description=t),class:"input min-h-[100px] resize-none",placeholder:"Descreva detalhes do documento..."},null,512),[[U,o.description]])]),c(x,{modelValue:o.documentNumber,"onUpdate:modelValue":e[3]||(e[3]=t=>o.documentNumber=t),label:"Número do Documento (opcional)",placeholder:"Ex: 110100123456A"},null,8,["modelValue"]),c(x,{modelValue:o.location,"onUpdate:modelValue":e[4]||(e[4]=t=>o.location=t),label:"Onde perdeu?",placeholder:"Ex: Praça da Independência, Maputo",icon:"fas fa-map-marker-alt"},null,8,["modelValue"]),a("div",Z,[e[14]||(e[14]=a("label",{class:"form-label"},"Foto do Documento (opcional)",-1)),a("div",{class:"border-2 border-dashed border-gray-300 dark:border-dark-border rounded-lg p-6 text-center cursor-pointer hover:border-primary transition-colors",onClick:w},[o.file?(m(),v("div",ae,[e[13]||(e[13]=a("i",{class:"fas fa-file text-primary"},null,-1)),a("span",null,_(o.file.name),1),a("button",{type:"button",onClick:e[5]||(e[5]=D(t=>o.file=void 0,["stop"])),class:"text-danger"},[...e[12]||(e[12]=[a("i",{class:"fas fa-times"},null,-1)])])])):(m(),v("div",ee,[...e[11]||(e[11]=[a("i",{class:"fas fa-cloud-upload-alt text-4xl text-gray-400 mb-2"},null,-1),a("p",{class:"text-gray-600 dark:text-gray-400"}," Clique para adicionar foto ",-1)])]))]),a("input",{ref_key:"fileInputRef",ref:r,type:"file",accept:"image/*",class:"hidden",onChange:I},null,544)]),c(z,{type:"submit",variant:"primary",size:"lg","full-width":"",loading:d.value,"loading-text":"Publicando..."},{default:C(()=>[...e[15]||(e[15]=[a("i",{class:"fas fa-paper-plane mr-2"},null,-1),j(" Publicar Documento Perdido ",-1)])]),_:1},8,["loading"])],32)])]),c(O)]),_:1}))}});export{ue as default};
