var k=(n,i,c)=>new Promise((v,p)=>{var d=r=>{try{s(c.next(r))}catch(y){p(y)}},u=r=>{try{s(c.throw(r))}catch(y){p(y)}},s=r=>r.done?v(r.value):Promise.resolve(r.value).then(d,u);s((c=c.apply(n,i)).next())});import{a as S,c as m,b as a,n as w,h as t,F as C,s as $,Q as P,o as l,r as B,P as R,l as F,j as g,i as L,u as M,t as f,k as x,e as b,w as h}from"./vue-vendor-DaTTP-8l.js";import{u as q}from"./documents-G8DuhIIf.js";import{a as O,_,T as Q}from"./index-mTKM-63l.js";import"./supabase-DO0Dm75k.js";const A={key:0,class:"space-y-3"},G={key:1,class:"space-y-4"},H={key:2,class:"space-y-2"},J={key:3},K=S({__name:"LoadingSkeleton",props:{type:{default:"custom"},count:{default:3},width:{},height:{},rounded:{type:Boolean,default:!1}},setup(n){const i=n,c=m(()=>i.rounded?"rounded-lg overflow-hidden":""),v=m(()=>i.type!=="custom"?{}:{width:i.width||"100%",height:i.height||"20px"});return(p,d)=>(l(),a("div",{class:w(c.value)},[n.type==="card"?(l(),a("div",A,[...d[0]||(d[0]=[t("div",{class:"skeleton-image"},null,-1),t("div",{class:"skeleton-text w-3/4"},null,-1),t("div",{class:"skeleton-text w-1/2"},null,-1),t("div",{class:"skeleton-text w-full"},null,-1)])])):n.type==="list"?(l(),a("div",G,[(l(!0),a(C,null,$(n.count,u=>(l(),a("div",{key:u,class:"flex items-center space-x-3"},[...d[1]||(d[1]=[t("div",{class:"skeleton-avatar"},null,-1),t("div",{class:"flex-1 space-y-2"},[t("div",{class:"skeleton-text w-3/4"}),t("div",{class:"skeleton-text w-1/2"})],-1)])]))),128))])):n.type==="text"?(l(),a("div",H,[(l(!0),a(C,null,$(n.count,u=>(l(),a("div",{key:u,class:"skeleton-text"}))),128))])):n.type==="avatar"?(l(),a("div",J,[...d[2]||(d[2]=[t("div",{class:"skeleton-avatar"},null,-1)])])):(l(),a("div",{key:4,class:"skeleton",style:P(v.value)},null,4))],2))}}),U={class:"min-h-screen bg-gray-50 dark:bg-dark-bg"},W={class:"fixed top-0 left-0 right-0 z-40 bg-white/90 dark:bg-dark-card/90 backdrop-blur-sm border-b border-gray-200 dark:border-dark-border pt-safe"},X={class:"flex items-center justify-between px-4 h-14"},Y={class:"pt-14 pb-safe"},Z={key:0,class:"p-4"},tt={key:1,class:"max-w-2xl mx-auto"},et={class:"relative aspect-square bg-gray-200 dark:bg-dark-card"},st=["src","alt"],at={key:1,class:"w-full h-full flex items-center justify-center"},lt={class:"p-4 space-y-6"},ot={class:"flex items-center space-x-2"},rt={class:"badge badge-primary"},nt={class:"text-2xl font-bold text-gray-900 dark:text-dark-text mb-2"},it={key:0,class:"text-gray-600 dark:text-gray-400"},dt={class:"card space-y-3"},ut={key:0,class:"flex items-start"},ct={class:"flex-1"},ft={class:"font-medium"},mt={key:1,class:"flex items-start"},vt={class:"flex-1"},pt={class:"font-medium"},yt={class:"flex items-start"},gt={class:"flex-1"},xt={class:"font-medium"},bt={key:2,class:"flex items-start"},kt={class:"flex-1"},ht={class:"font-medium"},_t={class:"space-y-2"},wt={key:2,class:"flex flex-col items-center justify-center min-h-[60vh] px-4"},St=S({__name:"DocumentDetailView",setup(n){const i=M(),c=R(),v=q(),{success:p,error:d}=O(),u=B(!0),s=B(null),r=c.params.id,y=m(()=>s.value?{lost:"badge badge-danger",found:"badge badge-success",matched:"badge bg-purple-500/10 text-purple-500",returned:"badge badge-success"}[s.value.status]||"badge badge-primary":""),E=m(()=>s.value?{lost:"Perdido",found:"Encontrado",matched:"Match",returned:"Devolvido",normal:"Normal"}[s.value.status]||s.value.status:""),N=m(()=>s.value?{passport:"fas fa-passport",id_card:"fas fa-id-card",driver_license:"fas fa-id-card-alt",birth_certificate:"fas fa-file-alt",other:"fas fa-file"}[s.value.type]||"fas fa-file":""),V=m(()=>s.value?{passport:"Passaporte",id_card:"Bilhete de Identidade",driver_license:"Carta de Condução",birth_certificate:"Certidão de Nascimento",other:"Outro Documento"}[s.value.type]||"Documento":""),j=m(()=>s.value?new Date(s.value.created_at).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}):""),z=o=>new Date(o).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"}),T=()=>{s.value&&i.push(`/chat/${r}`)},D=()=>k(this,null,function*(){if(!s.value)return;const o={title:s.value.title,text:`${s.value.title} - ${s.value.description||"Ver documento"}`,url:`${window.location.origin}/document/${r}`};try{navigator.share?(yield navigator.share(o),p("Documento compartilhado!")):(yield navigator.clipboard.writeText(o.url),p("Link copiado para área de transferência!"))}catch(e){console.error("Error sharing:",e)}});return F(()=>k(this,null,function*(){u.value=!0;const o=yield v.fetchDocumentById(r);o.success?s.value=v.currentDocument:d(o.error||"Erro ao carregar documento"),u.value=!1})),(o,e)=>(l(),a("div",U,[t("header",W,[t("div",X,[t("button",{class:"btn-icon",onClick:e[0]||(e[0]=I=>L(i).back())},[...e[2]||(e[2]=[t("i",{class:"fas fa-arrow-left"},null,-1)])]),e[4]||(e[4]=t("h1",{class:"text-lg font-semibold"},"Detalhes",-1)),t("button",{class:"btn-icon",onClick:D},[...e[3]||(e[3]=[t("i",{class:"fas fa-share-alt"},null,-1)])])])]),t("div",Y,[u.value?(l(),a("div",Z,[g(K,{type:"card"})])):s.value?(l(),a("div",tt,[t("div",et,[s.value.file_url||s.value.thumbnail_url?(l(),a("img",{key:0,src:s.value.file_url||s.value.thumbnail_url,alt:s.value.title,class:"w-full h-full object-cover"},null,8,st)):(l(),a("div",at,[...e[5]||(e[5]=[t("i",{class:"fas fa-file text-gray-400 text-8xl"},null,-1)])]))]),t("div",lt,[t("div",ot,[t("span",{class:w(y.value)},f(E.value),3),t("span",rt,[t("i",{class:w([N.value,"mr-1"])},null,2),x(" "+f(V.value),1)])]),t("div",null,[t("h2",nt,f(s.value.title),1),s.value.description?(l(),a("p",it,f(s.value.description),1)):b("",!0)]),t("div",dt,[s.value.document_number?(l(),a("div",ut,[e[7]||(e[7]=t("i",{class:"fas fa-hashtag text-gray-400 w-6 mt-1"},null,-1)),t("div",ct,[e[6]||(e[6]=t("p",{class:"text-sm text-gray-500"},"Número do Documento",-1)),t("p",ft,f(s.value.document_number),1)])])):b("",!0),s.value.location?(l(),a("div",mt,[e[9]||(e[9]=t("i",{class:"fas fa-map-marker-alt text-gray-400 w-6 mt-1"},null,-1)),t("div",vt,[e[8]||(e[8]=t("p",{class:"text-sm text-gray-500"},"Local",-1)),t("p",pt,f(s.value.location),1)])])):b("",!0),t("div",yt,[e[11]||(e[11]=t("i",{class:"fas fa-clock text-gray-400 w-6 mt-1"},null,-1)),t("div",gt,[e[10]||(e[10]=t("p",{class:"text-sm text-gray-500"},"Data de Publicação",-1)),t("p",xt,f(j.value),1)])]),s.value.issue_date?(l(),a("div",bt,[e[13]||(e[13]=t("i",{class:"fas fa-calendar text-gray-400 w-6 mt-1"},null,-1)),t("div",kt,[e[12]||(e[12]=t("p",{class:"text-sm text-gray-500"},"Data de Emissão",-1)),t("p",ht,f(z(s.value.issue_date)),1)])])):b("",!0)]),t("div",_t,[g(_,{variant:"primary",size:"lg","full-width":"",onClick:T},{default:h(()=>[...e[14]||(e[14]=[t("i",{class:"fas fa-comment-dots mr-2"},null,-1),x(" Entrar em Contacto ",-1)])]),_:1}),g(_,{variant:"outline",size:"lg","full-width":"",onClick:D},{default:h(()=>[...e[15]||(e[15]=[t("i",{class:"fas fa-share-alt mr-2"},null,-1),x(" Compartilhar ",-1)])]),_:1})])])])):(l(),a("div",wt,[e[17]||(e[17]=t("i",{class:"fas fa-exclamation-triangle text-gray-400 text-6xl mb-4"},null,-1)),e[18]||(e[18]=t("h3",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2"}," Documento não encontrado ",-1)),g(_,{variant:"primary",onClick:e[1]||(e[1]=I=>L(i).back())},{default:h(()=>[...e[16]||(e[16]=[x(" Voltar ",-1)])]),_:1})]))]),g(Q)]))}});export{St as default};
