var c=(e,s,t)=>new Promise((u,r)=>{var d=n=>{try{i(t.next(n))}catch(o){r(o)}},f=n=>{try{i(t.throw(n))}catch(o){r(o)}},i=n=>n.done?u(n.value):Promise.resolve(n.value).then(d,f);i((t=t.apply(e,s)).next())});import{c as p}from"./supabase-DO0Dm75k.js";const l="https://agqpfpzsxqbrqyjiqtiy.supabase.co",y="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFncXBmcHpzeHFicnF5amlxdGl5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYwNjc3MTksImV4cCI6MjA4MTY0MzcxOX0.keYcyd0FViLtxH2DvlH8Ce4EglzGoTSC7via74SE52o",I=p(l,y,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storage:typeof window!="undefined"?window.localStorage:void 0,storageKey:"sb-agqpfpzsxqbrqyjiqtiy-auth-token",flowType:"pkce"},realtime:{params:{eventsPerSecond:10}}});function a(){if(typeof window=="undefined")return;["fmd_session","sb-agqpfpzsxqbrqyjiqtiy-auth-token"].forEach(s=>{try{localStorage.removeItem(s)}catch(t){}})}function h(e){if(!e)return!1;const s=(e.message||e.toString()||"").toLowerCase();return s.includes("invalid refresh token")||s.includes("refresh token not found")||s.includes("jwt")||e.status===400&&s.includes("refresh")}typeof window!="undefined"&&(I.auth.onAuthStateChange((e,s)=>c(void 0,null,function*(){e==="SIGNED_OUT"&&a(),e==="TOKEN_REFRESHED"&&!s&&a()})),window.addEventListener("unhandledrejection",e=>{const s=e.reason;h(s)&&(a(),e.preventDefault())}));export{I as s};
