var y=(k,d,n)=>new Promise((v,u)=>{var _=o=>{try{s(n.next(o))}catch(m){u(m)}},c=o=>{try{s(n.throw(o))}catch(m){u(m)}},s=o=>o.done?v(o.value):Promise.resolve(o.value).then(_,c);s((n=n.apply(k,d)).next())});import{a as z,r as D,P as T,c as f,l as I,p as P,w as g,o as r,h as t,j as p,i as C,u as R,b as l,n as $,t as i,k as b,e as x}from"./vue-vendor-D3gglZhg.js";import{u as M}from"./documents-C7yg1LXQ.js";import{a as q,b as h,T as O}from"./index-DVvGwCfe.js";import{_ as U}from"./MainLayout.vue_vue_type_script_setup_true_lang-po6AB_6N.js";import{_ as A}from"./LoadingSkeleton.vue_vue_type_script_setup_true_lang-7Vd9EgBJ.js";import"./supabase-BZLovRLP.js";import"./logofmd-DIbmBIad.js";const F={class:"min-h-screen bg-gray-50 dark:bg-dark-bg"},G={class:"fixed top-0 left-0 right-0 z-40 bg-white/90 dark:bg-dark-card/90 backdrop-blur-sm border-b border-gray-200 dark:border-dark-border pt-safe"},H={class:"flex items-center justify-between px-4 h-14"},J={class:"pt-14 pb-safe"},K={key:0,class:"p-4"},Q={key:1,class:"max-w-2xl mx-auto"},W={class:"relative aspect-square bg-gray-200 dark:bg-dark-card"},X=["src","alt"],Y={key:1,class:"w-full h-full flex items-center justify-center"},Z={class:"p-4 space-y-6"},tt={class:"flex items-center space-x-2"},et={class:"badge badge-primary"},st={class:"text-2xl font-bold text-gray-900 dark:text-dark-text mb-2"},at={key:0,class:"text-gray-600 dark:text-gray-400"},ot={class:"card space-y-3"},rt={key:0,class:"flex items-start"},lt={class:"flex-1"},it={class:"font-medium"},nt={key:1,class:"flex items-start"},dt={class:"flex-1"},ut={class:"font-medium"},ct={class:"flex items-start"},mt={class:"flex-1"},ft={class:"font-medium"},pt={key:2,class:"flex items-start"},vt={class:"flex-1"},gt={class:"font-medium"},bt={class:"space-y-2"},xt={key:2,class:"flex flex-col items-center justify-center min-h-[60vh] px-4"},Bt=z({__name:"DocumentDetailView",setup(k){const d=R(),n=T(),v=M(),{success:u,error:_}=q(),c=D(!0),s=D(null),o=n.params.id,m=f(()=>s.value?{lost:"badge badge-danger",found:"badge bg-orange-500/10 text-orange-600 dark:text-orange-400",matched:"badge bg-purple-500/10 text-purple-500",returned:"badge badge-success"}[s.value.status]||"badge badge-primary":""),B=f(()=>s.value?{lost:"Perdido",found:"Submetido por Utilizador",matched:"Match",returned:"Devolvido",normal:"Normal"}[s.value.status]||s.value.status:""),L=f(()=>s.value?{passport:"fas fa-passport",id_card:"fas fa-id-card",driver_license:"fas fa-id-card-alt",birth_certificate:"fas fa-file-alt",other:"fas fa-file"}[s.value.type]||"fas fa-file":""),N=f(()=>s.value?{passport:"Passaporte",id_card:"Bilhete de Identidade",driver_license:"Carta de Condução",birth_certificate:"Certidão de Nascimento",other:"Outro Documento"}[s.value.type]||"Documento":""),S=f(()=>s.value?new Date(s.value.created_at).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}):""),V=a=>new Date(a).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"}),E=()=>{s.value&&d.push(`/chat/${o}`)},w=()=>y(this,null,function*(){if(!s.value)return;const a={title:s.value.title,text:`${s.value.title} - ${s.value.description||"Ver documento"}`,url:`${window.location.origin}/document/${o}`};try{navigator.share?(yield navigator.share(a),u("Documento compartilhado!")):(yield navigator.clipboard.writeText(a.url),u("Link copiado para área de transferência!"))}catch(e){console.error("Error sharing:",e)}});return I(()=>y(this,null,function*(){c.value=!0;const a=yield v.fetchDocumentById(o);a.success?s.value=v.currentDocument:_(a.error||"Erro ao carregar documento"),c.value=!1})),(a,e)=>(r(),P(U,{"show-top-bar":!1},{default:g(()=>[t("div",F,[t("header",G,[t("div",H,[t("button",{class:"btn-icon",onClick:e[0]||(e[0]=j=>C(d).back())},[...e[2]||(e[2]=[t("i",{class:"fas fa-arrow-left"},null,-1)])]),e[4]||(e[4]=t("h1",{class:"text-lg font-semibold"},"Detalhes",-1)),t("button",{class:"btn-icon",onClick:w},[...e[3]||(e[3]=[t("i",{class:"fas fa-share-alt"},null,-1)])])])]),t("div",J,[c.value?(r(),l("div",K,[p(A,{type:"card"})])):s.value?(r(),l("div",Q,[t("div",W,[s.value.file_url||s.value.thumbnail_url?(r(),l("img",{key:0,src:s.value.file_url||s.value.thumbnail_url,alt:s.value.title,class:"w-full h-full object-cover"},null,8,X)):(r(),l("div",Y,[...e[5]||(e[5]=[t("i",{class:"fas fa-file text-gray-400 text-8xl"},null,-1)])]))]),t("div",Z,[t("div",tt,[t("span",{class:$(m.value)},i(B.value),3),t("span",et,[t("i",{class:$([L.value,"mr-1"])},null,2),b(" "+i(N.value),1)])]),t("div",null,[t("h2",st,i(s.value.title),1),s.value.description?(r(),l("p",at,i(s.value.description),1)):x("",!0)]),t("div",ot,[s.value.document_number?(r(),l("div",rt,[e[7]||(e[7]=t("i",{class:"fas fa-hashtag text-gray-400 w-6 mt-1"},null,-1)),t("div",lt,[e[6]||(e[6]=t("p",{class:"text-sm text-gray-500"},"Número do Documento",-1)),t("p",it,i(s.value.document_number),1)])])):x("",!0),s.value.location?(r(),l("div",nt,[e[9]||(e[9]=t("i",{class:"fas fa-map-marker-alt text-gray-400 w-6 mt-1"},null,-1)),t("div",dt,[e[8]||(e[8]=t("p",{class:"text-sm text-gray-500"},"Local",-1)),t("p",ut,i(s.value.location),1)])])):x("",!0),t("div",ct,[e[11]||(e[11]=t("i",{class:"fas fa-clock text-gray-400 w-6 mt-1"},null,-1)),t("div",mt,[e[10]||(e[10]=t("p",{class:"text-sm text-gray-500"},"Data de Publicação",-1)),t("p",ft,i(S.value),1)])]),s.value.issue_date?(r(),l("div",pt,[e[13]||(e[13]=t("i",{class:"fas fa-calendar text-gray-400 w-6 mt-1"},null,-1)),t("div",vt,[e[12]||(e[12]=t("p",{class:"text-sm text-gray-500"},"Data de Emissão",-1)),t("p",gt,i(V(s.value.issue_date)),1)])])):x("",!0)]),t("div",bt,[p(h,{variant:"primary",size:"lg","full-width":"",onClick:E},{default:g(()=>[...e[14]||(e[14]=[t("i",{class:"fas fa-comment-dots mr-2"},null,-1),b(" Entrar em Contacto ",-1)])]),_:1}),p(h,{variant:"outline",size:"lg","full-width":"",onClick:w},{default:g(()=>[...e[15]||(e[15]=[t("i",{class:"fas fa-share-alt mr-2"},null,-1),b(" Compartilhar ",-1)])]),_:1})])])])):(r(),l("div",xt,[e[17]||(e[17]=t("i",{class:"fas fa-exclamation-triangle text-gray-400 text-6xl mb-4"},null,-1)),e[18]||(e[18]=t("h3",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2"}," Documento não encontrado ",-1)),p(h,{variant:"primary",onClick:e[1]||(e[1]=j=>C(d).back())},{default:g(()=>[...e[16]||(e[16]=[b(" Voltar ",-1)])]),_:1})]))]),p(O)])]),_:1}))}});export{Bt as default};
