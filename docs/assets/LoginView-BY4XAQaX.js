var x=(S,h,c)=>new Promise((v,g)=>{var n=t=>{try{d(c.next(t))}catch(p){g(p)}},i=t=>{try{d(c.throw(t))}catch(p){g(p)}},d=t=>t.done?v(t.value):Promise.resolve(t.value).then(n,i);d((c=c.apply(S,h)).next())});import{a as T,r as y,M as k,b as w,N as D,h as r,j as m,e as P,k as V,t as N,O as U,o as b,u as F,P as M}from"./vue-vendor-CG29anWM.js";import{l as $}from"./logofmd-DIbmBIad.js";import{u as j,T as A,a as B,_ as I}from"./index-BZNt55cC.js";import{_ as f}from"./BaseInput.vue_vue_type_script_setup_true_lang-CLqNeAgL.js";import"./supabase-DO0Dm75k.js";const z={class:"min-h-screen bg-gradient-to-br from-orange-400 via-orange-300 to-orange-200 flex items-center justify-center px-4 relative overflow-hidden"},W={class:"w-full max-w-md"},G={key:0,class:"bg-white dark:bg-dark-card rounded-3xl shadow-2xl p-8 text-center animate-fade-in"},J={key:1,class:"bg-white dark:bg-dark-card rounded-3xl shadow-2xl p-8 animate-slide-in"},O={class:"text-2xl font-bold text-gray-900 dark:text-dark-text mb-2"},Z=["disabled"],H={class:"text-center text-sm text-gray-600 dark:text-gray-400 mt-4"},K=["disabled"],Q={class:"text-center text-sm text-gray-600 dark:text-gray-400 mt-4"},X=T({__name:"LoginView",setup(S){const h=F(),c=M(),v=j(),{success:g,error:n}=B(),i=y("login"),d=y(!1),t=y(!1),p=()=>{i.value="login",d.value=!0},L=()=>{i.value="register",d.value=!0},u=k({email:"",password:""}),o=k({fullName:"",email:"",phoneNumber:"",password:"",confirmPassword:"",country:"MZ"}),a=k({email:"",password:"",fullName:"",confirmPassword:""}),E=l=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l),C=()=>{a.email="",a.password="",a.fullName="",a.confirmPassword=""},q=()=>x(this,null,function*(){if(C(),!E(u.email)){a.email="Email inválido";return}if(u.password.length<6){a.password="Senha deve ter no mínimo 6 caracteres";return}t.value=!0;const l=yield v.signIn(u.email,u.password);if(t.value=!1,l.success){g("Login realizado com sucesso!");const e=c.query.redirect||"/";h.push(e)}else n(l.error||"Erro ao fazer login"),a.email=l.error||""}),R=l=>x(this,null,function*(){if(l&&(l.preventDefault(),l.stopPropagation()),C(),console.log("handleRegister called",{fullName:o.fullName,email:o.email,passwordLength:o.password.length,confirmPasswordLength:o.confirmPassword.length}),!o.fullName.trim())return a.fullName="Nome é obrigatório",console.log("Validation failed: fullName is empty"),n("Nome é obrigatório"),!1;if(!E(o.email))return a.email="Email inválido",console.log("Validation failed: invalid email"),n("Email inválido"),!1;if(o.password.length<6)return a.password="Senha deve ter no mínimo 6 caracteres",console.log("Validation failed: password too short"),n("Senha deve ter no mínimo 6 caracteres"),!1;if(o.password!==o.confirmPassword)return a.confirmPassword="Senhas não conferem",console.log("Validation failed: passwords do not match"),n("Senhas não conferem"),!1;console.log("Validation passed, calling signUp..."),t.value=!0;try{const e=yield v.signUp(o.email,o.password,{fullName:o.fullName,phoneNumber:o.phoneNumber,country:o.country});console.log("signUp result:",e),e.success?(g("Conta criada com sucesso! Verifique seu email."),i.value="login",u.email=o.email,o.fullName="",o.email="",o.password="",o.confirmPassword="",o.phoneNumber=""):(n(e.error||"Erro ao criar conta"),console.error("SignUp error:",e.error))}catch(e){console.error("Unexpected error in handleRegister:",e),n("Erro inesperado ao criar conta. Tente novamente.")}finally{t.value=!1}return!1});return(l,e)=>(b(),w("div",z,[e[18]||(e[18]=D('<div class="absolute top-10 right-20 w-2 h-2 bg-white/30 rounded-full" data-v-ec7e3f55></div><div class="absolute top-16 right-32 w-2 h-2 bg-white/30 rounded-full" data-v-ec7e3f55></div><div class="absolute top-12 right-24 w-2 h-2 bg-white/30 rounded-full" data-v-ec7e3f55></div><div class="absolute top-20 right-16 w-2 h-2 bg-white/40 rounded-full" data-v-ec7e3f55></div><div class="absolute bottom-32 left-16 w-2 h-2 bg-white/30 rounded-full" data-v-ec7e3f55></div><div class="absolute bottom-40 left-20 w-2 h-2 bg-white/30 rounded-full" data-v-ec7e3f55></div><div class="absolute bottom-36 left-12 w-2 h-2 bg-white/40 rounded-full" data-v-ec7e3f55></div>',7)),r("div",W,[d.value?P("",!0):(b(),w("div",G,[e[10]||(e[10]=r("div",{class:"mb-8"},[r("img",{src:$,alt:"FindMyDocs Logo",class:"h-32 w-32 mx-auto rounded-2xl shadow-lg mb-4"})],-1)),e[11]||(e[11]=r("h1",{class:"text-2xl font-bold text-gray-900 dark:text-dark-text mb-2"},"Welcome!",-1)),e[12]||(e[12]=r("p",{class:"text-gray-600 dark:text-gray-400 mb-8 text-sm"}," Sign in to access your documents ",-1)),r("button",{onClick:p,class:"w-full bg-gradient-to-r from-orange-400 to-orange-500 text-white font-semibold py-4 px-6 rounded-2xl shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200 mb-4"}," Go to Sign in "),r("p",{class:"text-sm text-gray-600 dark:text-gray-400"},[e[9]||(e[9]=V(" No account yet? ",-1)),r("button",{onClick:L,class:"text-orange-500 font-semibold hover:underline"},"Sign up")])])),d.value?(b(),w("div",J,[r("button",{onClick:e[0]||(e[0]=s=>d.value=!1),class:"mb-6 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white flex items-center"},[...e[13]||(e[13]=[r("i",{class:"fas fa-arrow-left mr-2"},null,-1)])]),r("h2",O,N(i.value==="login"?"Welcome back!":"Create new account"),1),e[17]||(e[17]=r("div",{class:"w-12 h-1 bg-gradient-to-r from-orange-400 to-orange-500 rounded-full mb-6"},null,-1)),i.value==="login"?(b(),w("form",{key:0,onSubmit:U(q,["prevent"]),class:"space-y-5"},[m(f,{modelValue:u.email,"onUpdate:modelValue":e[1]||(e[1]=s=>u.email=s),label:"Email",type:"email",placeholder:"Enter your email",icon:"fas fa-envelope",error:a.email,required:""},null,8,["modelValue","error"]),m(f,{modelValue:u.password,"onUpdate:modelValue":e[2]||(e[2]=s=>u.password=s),label:"Password",type:"password",placeholder:"Enter your password",icon:"fas fa-lock",error:a.password,required:""},null,8,["modelValue","error"]),e[15]||(e[15]=r("div",{class:"flex items-center justify-between text-sm"},[r("label",{class:"flex items-center cursor-pointer"},[r("input",{type:"checkbox",class:"w-4 h-4 text-orange-500 border-gray-300 rounded focus:ring-orange-500"}),r("span",{class:"ml-2 text-gray-600 dark:text-gray-400"},"Remember me")])],-1)),r("button",{type:"submit",disabled:t.value,class:"w-full bg-gradient-to-r from-orange-400 to-orange-500 text-white font-semibold py-4 px-6 rounded-2xl shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"},N(t.value?"Signing in...":"Sign in!"),9,Z),r("p",H,[e[14]||(e[14]=V(" Don't have an account? ",-1)),r("button",{type:"button",onClick:e[3]||(e[3]=s=>i.value="register"),class:"text-orange-500 font-semibold hover:underline"},"Sign up")])],32)):(b(),w("form",{key:1,onSubmit:U(R,["prevent"]),class:"space-y-5"},[m(f,{modelValue:o.fullName,"onUpdate:modelValue":e[4]||(e[4]=s=>o.fullName=s),label:"Full name",placeholder:"John Doe",icon:"fas fa-user",error:a.fullName,required:""},null,8,["modelValue","error"]),m(f,{modelValue:o.email,"onUpdate:modelValue":e[5]||(e[5]=s=>o.email=s),label:"Email address",type:"email",placeholder:"Enter your email",icon:"fas fa-envelope",error:a.email,required:""},null,8,["modelValue","error"]),m(f,{modelValue:o.password,"onUpdate:modelValue":e[6]||(e[6]=s=>o.password=s),label:"Create password",type:"password",placeholder:"Min 6 characters",icon:"fas fa-lock",error:a.password,required:""},null,8,["modelValue","error"]),m(f,{modelValue:o.confirmPassword,"onUpdate:modelValue":e[7]||(e[7]=s=>o.confirmPassword=s),label:"Confirm password",type:"password",placeholder:"Confirm your password",icon:"fas fa-lock",error:a.confirmPassword,required:""},null,8,["modelValue","error"]),r("button",{type:"submit",disabled:t.value,class:"w-full bg-gradient-to-r from-orange-400 to-orange-500 text-white font-semibold py-4 px-6 rounded-2xl shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"},N(t.value?"Creating account...":"Sign Up!"),9,K),r("p",Q,[e[16]||(e[16]=V(" Already have an account? ",-1)),r("button",{type:"button",onClick:e[8]||(e[8]=s=>i.value="login"),class:"text-orange-500 font-semibold hover:underline"},"Sign in")])],32))])):P("",!0)]),m(A)]))}}),te=I(X,[["__scopeId","data-v-ec7e3f55"]]);export{te as default};
